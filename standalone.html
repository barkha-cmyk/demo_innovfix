<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Astrology - Your Personal Astrologer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo-icon {
            font-size: 32px;
            line-height: 1;
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif;
        }

        .header-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        /* Navigation */
        nav {
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.2s;
            cursor: pointer;
            display: inline-block;
        }

        .nav-links a:hover, .nav-links a.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 20px;
            color: white;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 16px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .hero p {
            font-size: 20px;
            margin-bottom: 32px;
            opacity: 0.9;
        }

        /* Services Grid */
        .services {
            padding: 60px 20px;
            background: rgba(255, 255, 255, 0.95);
            margin: 40px 20px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 36px;
            text-align: center;
            margin-bottom: 40px;
            color: #333;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .service-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
            user-select: none;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }
        
        .service-card * {
            pointer-events: none;
        }
        
        .service-card:active {
            transform: scale(0.98);
        }
        
        /* Loading states */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(102, 126, 234, 0.3);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Interactive elements */
        input:focus, select:focus, textarea:focus {
            border-color: #667eea !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Success/Error messages */
        .message-success {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
        }
        
        .message-error {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
        }
        
        /* Progress indicator */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
            margin: 16px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }
        
        /* Card hover effects */
        .horoscope-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.2);
        }
        
        /* Smooth transitions */
        * {
            transition: background-color 0.2s, color 0.2s, transform 0.2s;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .service-icon {
            font-size: 64px;
            margin-bottom: 16px;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 64px;
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'EmojiOne Color', 'Android Emoji', sans-serif;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .service-icon::before {
            content: '';
            display: inline-block;
        }

        .service-card h3 {
            font-size: 20px;
            margin-bottom: 8px;
            color: #333;
        }

        .service-card p {
            color: #666;
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .premium-badge {
            display: inline-block;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 8px;
        }

        /* Chat Section */
        .chat-section {
            padding: 40px 20px;
            display: none;
        }

        .chat-section.active,
        .chat-section[style*="display: block"] {
            display: block !important;
        }

        .chat-box {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            justify-content: flex-end;
        }

        .message.bot {
            justify-content: flex-start;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 12px;
            word-wrap: break-word;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message.bot .message-content {
            background: #f0f0f0;
            color: #333;
        }

        .chat-input {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 12px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            outline: none;
        }

        .chat-input input:focus {
            border-color: #667eea;
        }

        .chat-input button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Sign Selector */
        .sign-selector {
            position: relative;
        }

        .sign-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 8px;
            min-width: 220px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .sign-menu.show {
            display: block;
        }

        .sign-option {
            padding: 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sign-option:hover {
            background: #f0f0f0;
        }

        .sign-option .symbol {
            font-size: 24px;
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif;
            line-height: 1;
        }
        
        #sign-btn {
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif;
        }

        /* Horoscope Cards */
        .horoscope-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }

        .horoscope-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .horoscope-card h3 {
            font-size: 24px;
            margin-bottom: 16px;
            color: #667eea;
        }

        .horoscope-card p {
            color: #666;
            line-height: 1.8;
        }

        /* Footer */
        footer {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 32px;
            }
            .services-grid {
                grid-template-columns: 1fr;
            }
            .nav-links {
                flex-wrap: wrap;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo" id="app-logo">
                    <span class="logo-icon">üåü</span>
                    <span>AI Astrologer</span>
                </div>
                <div class="header-controls">
                    <div class="sign-selector">
                        <button class="btn btn-secondary" onclick="toggleSignMenu()" id="sign-btn">‚ôà Aries</button>
                        <div class="sign-menu" id="sign-menu">
                            <div class="sign-option" onclick="selectSign('Aries')"><span class="symbol">‚ôà</span> Aries</div>
                            <div class="sign-option" onclick="selectSign('Taurus')"><span class="symbol">‚ôâ</span> Taurus</div>
                            <div class="sign-option" onclick="selectSign('Gemini')"><span class="symbol">‚ôä</span> Gemini</div>
                            <div class="sign-option" onclick="selectSign('Cancer')"><span class="symbol">‚ôã</span> Cancer</div>
                            <div class="sign-option" onclick="selectSign('Leo')"><span class="symbol">‚ôå</span> Leo</div>
                            <div class="sign-option" onclick="selectSign('Virgo')"><span class="symbol">‚ôç</span> Virgo</div>
                            <div class="sign-option" onclick="selectSign('Libra')"><span class="symbol">‚ôé</span> Libra</div>
                            <div class="sign-option" onclick="selectSign('Scorpio')"><span class="symbol">‚ôè</span> Scorpio</div>
                            <div class="sign-option" onclick="selectSign('Sagittarius')"><span class="symbol">‚ôê</span> Sagittarius</div>
                            <div class="sign-option" onclick="selectSign('Capricorn')"><span class="symbol">‚ôë</span> Capricorn</div>
                            <div class="sign-option" onclick="selectSign('Aquarius')"><span class="symbol">‚ôí</span> Aquarius</div>
                            <div class="sign-option" onclick="selectSign('Pisces')"><span class="symbol">‚ôì</span> Pisces</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="toggleLanguage()" id="lang-btn">üá¨üáß English</button>
                    <button class="btn btn-primary" data-action="chat" onclick="navigateTo('chat')">üí¨ Chat Now</button>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul class="nav-links">
                <li><a href="#" data-section="home" onclick="navigateTo('home'); return false;" class="active" id="nav-home">Home</a></li>
                <li><a href="#" data-section="horoscope" onclick="navigateTo('horoscope'); return false;" id="nav-horoscope">Horoscope</a></li>
                <li><a href="#" data-section="kundli" onclick="navigateTo('kundli'); return false;" id="nav-kundli">Kundli</a></li>
                <li><a href="#" data-section="matchmaking" onclick="navigateTo('matchmaking'); return false;" id="nav-matchmaking">Matchmaking</a></li>
                <li><a href="#" data-section="tarot" onclick="navigateTo('tarot'); return false;" id="nav-tarot">Tarot</a></li>
                <li><a href="#" data-section="numerology" onclick="navigateTo('numerology'); return false;" id="nav-numerology">Numerology</a></li>
                <li><a href="#" data-section="panchang" onclick="navigateTo('panchang'); return false;" id="nav-panchang">Panchang</a></li>
                <li><a href="#" data-section="gemstone" onclick="navigateTo('gemstone'); return false;" id="nav-gemstone">Gemstone</a></li>
                <li><a href="#" data-section="vastu" onclick="navigateTo('vastu'); return false;" id="nav-vastu">Vastu</a></li>
                <li><a href="#" data-section="history" onclick="navigateTo('history'); return false;" id="nav-history">History</a></li>
                <li><a href="#" data-section="profile" onclick="navigateTo('profile'); return false;" id="nav-profile">Profile</a></li>
                <li><a href="#" data-action="chat" onclick="navigateTo('chat'); return false;" id="nav-chat">Chat</a></li>
            </ul>
        </div>
    </nav>

    <!-- Home Section -->
    <section id="home-section" class="section" style="display: block;">
        <div class="hero">
            <h1 id="hero-title">Welcome to AI Astrology</h1>
            <p id="hero-subtitle">Your Personal AI Astrologer - Get Instant Astrological Guidance</p>
            <button class="btn btn-primary" data-action="chat" onclick="navigateTo('chat')" style="font-size: 18px; padding: 14px 32px;">Start Free Chat</button>
        </div>

        <div class="services">
            <h2 class="section-title" id="services-title">Our Services</h2>
            <div class="services-grid">
                <div class="service-card" data-section="horoscope" onclick="navigateTo('horoscope')">
                    <div class="service-icon">üìÖ</div>
                    <h3 id="service-horoscope">Daily Horoscope</h3>
                    <p id="service-horoscope-desc">Get your daily, weekly, and monthly horoscope predictions based on your zodiac sign.</p>
                </div>
                <div class="service-card" data-section="kundli" onclick="navigateTo('kundli')">
                    <div class="service-icon">üîÆ</div>
                    <h3 id="service-kundli">Kundli / Birth Chart</h3>
                    <p id="service-kundli-desc">Generate your complete birth chart and understand your planetary positions.</p>
                    <span class="premium-badge">Premium</span>
                </div>
                <div class="service-card" data-section="matchmaking" onclick="navigateTo('matchmaking')">
                    <div class="service-icon">üíë</div>
                    <h3 id="service-matchmaking">Matchmaking</h3>
                    <p id="service-matchmaking-desc">Check compatibility between two people based on their zodiac signs and birth details.</p>
                    <span class="premium-badge">Premium</span>
                </div>
                <div class="service-card" data-section="tarot" onclick="navigateTo('tarot')">
                    <div class="service-icon">üÉè</div>
                    <h3 id="service-tarot">Tarot Reading</h3>
                    <p id="service-tarot-desc">Get insights into your future through AI-powered tarot card readings.</p>
                    <span class="premium-badge">Premium</span>
                </div>
                <div class="service-card" data-section="numerology" onclick="navigateTo('numerology')">
                    <div class="service-icon">üî¢</div>
                    <h3 id="service-numerology">Numerology</h3>
                    <p id="service-numerology-desc">Discover your life path number and understand its significance.</p>
                    <span class="premium-badge">Premium</span>
                </div>
                <div class="service-card" data-action="chat" onclick="navigateTo('chat')">
                    <div class="service-icon">üí¨</div>
                    <h3 id="service-chat">AI Astrologer Chat</h3>
                    <p id="service-chat-desc">Chat with our AI astrologer for instant answers to all your astrology questions.</p>
                </div>
                <div class="service-card" data-section="panchang" onclick="navigateTo('panchang')">
                    <div class="service-icon">üìø</div>
                    <h3 id="service-panchang">Panchang</h3>
                    <p id="service-panchang-desc">Check today's Tithi, Nakshatra, Yoga, Karana, and auspicious timings.</p>
                </div>
                <div class="service-card" data-section="gemstone" onclick="navigateTo('gemstone')">
                    <div class="service-icon">üíé</div>
                    <h3 id="service-gemstone">Gemstone Recommendations</h3>
                    <p id="service-gemstone-desc">Discover the perfect gemstone based on your zodiac sign and planetary positions.</p>
                    <span class="premium-badge">Premium</span>
                </div>
                <div class="service-card" data-section="vastu" onclick="navigateTo('vastu')">
                    <div class="service-icon">üè†</div>
                    <h3 id="service-vastu">Vastu Tips</h3>
                    <p id="service-vastu-desc">Get Vastu Shastra recommendations for your home and office arrangement.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Horoscope Section -->
    <section id="horoscope-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" id="horoscope-title" style="margin: 0;">Your Horoscope</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                    <button onclick="navigateTo('profile')" class="btn btn-secondary" style="font-size: 14px;">üë§ Profile</button>
                </div>
            </div>
            <div class="horoscope-cards">
                <div class="horoscope-card">
                    <h3 id="daily-title">Daily Horoscope</h3>
                    <p id="daily-content">Loading...</p>
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0;">
                        <button onclick="navigateTo('chat')" class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px; width: 100%;">üí¨ Ask About Today</button>
                    </div>
                </div>
                <div class="horoscope-card">
                    <h3 id="weekly-title">Weekly Horoscope</h3>
                    <p id="weekly-content">Loading...</p>
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0;">
                        <button onclick="navigateTo('tarot')" class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px; width: 100%;">üîÆ Get Tarot Reading</button>
                    </div>
                </div>
                <div class="horoscope-card">
                    <h3 id="monthly-title">Monthly Horoscope</h3>
                    <p id="monthly-content">Loading...</p>
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0;">
                        <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px; width: 100%;">üåü View Birth Chart</button>
                    </div>
                </div>
                <div class="horoscope-card">
                    <h3 id="yearly-title">Yearly Horoscope</h3>
                    <p id="yearly-content">Loading...</p>
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0;">
                        <button onclick="navigateTo('profile')" class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px; width: 100%;">üë§ Update Profile</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Chat Section -->
    <section id="chat-section" class="chat-section" style="display: none;">
        <div class="container">
            <div class="chat-box">
                <div class="chat-header">
                    <div>
                        <h3 style="margin: 0;" id="chat-header-title">üí¨ Chat with AI Astrologer</h3>
                        <p style="margin: 4px 0 0 0; opacity: 0.9; font-size: 14px;" id="chat-header-subtitle">Ask anything about astrology</p>
                    </div>
                    <button class="btn btn-secondary" onclick="hideChat()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">‚úï</button>
                </div>
                <div class="chat-messages" id="messages"></div>
                <div style="padding: 12px; background: rgba(255,255,255,0.1); border-top: 1px solid rgba(255,255,255,0.2);">
                    <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px;" id="quick-questions">
                        <button onclick="sendQuickQuestion('What is my daily horoscope?')" class="btn btn-secondary" style="font-size: 11px; padding: 6px 12px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">üìÖ Daily Horoscope</button>
                        <button onclick="sendQuickQuestion('Tell me about my zodiac sign')" class="btn btn-secondary" style="font-size: 11px; padding: 6px 12px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">üîÆ Zodiac Info</button>
                        <button onclick="sendQuickQuestion('What is my lucky number today?')" class="btn btn-secondary" style="font-size: 11px; padding: 6px 12px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">üéØ Lucky Number</button>
                        <button onclick="sendQuickQuestion('Career guidance')" class="btn btn-secondary" style="font-size: 11px; padding: 6px 12px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">üíº Career</button>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="user-input" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
                    <button onclick="sendMessage()" id="send-btn">Send</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Birth Chart Section -->
    <section id="kundli-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;">Kundli / Birth Chart</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                    <button onclick="navigateTo('matchmaking')" class="btn btn-secondary" style="font-size: 14px;">üíë Matchmaking</button>
                    <button onclick="navigateTo('profile')" class="btn btn-secondary" style="font-size: 14px;">üë§ Profile</button>
                </div>
            </div>
            <div style="max-width: 800px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;">Generate Your Birth Chart</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Date:</label>
                            <input type="date" id="kundli-date" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Time:</label>
                            <input type="time" id="kundli-time" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                        </div>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Place:</label>
                        <input type="text" id="kundli-place" placeholder="City, Country" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    </div>
                    <button onclick="generateKundli()" class="btn btn-primary" style="width: 100%; margin-bottom: 24px;">Generate Birth Chart</button>
                    <div id="kundli-result" style="display: none; padding: 20px; background: #f8f9fa; border-radius: 12px;">
                        <h4 style="margin-bottom: 16px; color: #667eea;">Your Birth Chart</h4>
                        <div id="kundli-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Compatibility Section -->
    <section id="matchmaking-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;">Matchmaking / Compatibility</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                    <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 14px;">üîÆ Kundli</button>
                </div>
            </div>
            <div style="max-width: 900px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;">Check Compatibility</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                        <div>
                            <h4 style="margin-bottom: 16px; color: #667eea;">Person 1</h4>
                            <div style="margin-bottom: 16px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Zodiac Sign:</label>
                                <select id="person1-sign" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                    <option value="Aries">‚ôà Aries</option>
                                    <option value="Taurus">‚ôâ Taurus</option>
                                    <option value="Gemini">‚ôä Gemini</option>
                                    <option value="Cancer">‚ôã Cancer</option>
                                    <option value="Leo">‚ôå Leo</option>
                                    <option value="Virgo">‚ôç Virgo</option>
                                    <option value="Libra">‚ôé Libra</option>
                                    <option value="Scorpio">‚ôè Scorpio</option>
                                    <option value="Sagittarius">‚ôê Sagittarius</option>
                                    <option value="Capricorn">‚ôë Capricorn</option>
                                    <option value="Aquarius">‚ôí Aquarius</option>
                                    <option value="Pisces">‚ôì Pisces</option>
                                </select>
                            </div>
                            <div style="margin-bottom: 16px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Date:</label>
                                <input type="date" id="person1-date" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                            </div>
                        </div>
                        <div>
                            <h4 style="margin-bottom: 16px; color: #667eea;">Person 2</h4>
                            <div style="margin-bottom: 16px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Zodiac Sign:</label>
                                <select id="person2-sign" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                    <option value="Aries">‚ôà Aries</option>
                                    <option value="Taurus">‚ôâ Taurus</option>
                                    <option value="Gemini">‚ôä Gemini</option>
                                    <option value="Cancer">‚ôã Cancer</option>
                                    <option value="Leo">‚ôå Leo</option>
                                    <option value="Virgo">‚ôç Virgo</option>
                                    <option value="Libra">‚ôé Libra</option>
                                    <option value="Scorpio">‚ôè Scorpio</option>
                                    <option value="Sagittarius">‚ôê Sagittarius</option>
                                    <option value="Capricorn">‚ôë Capricorn</option>
                                    <option value="Aquarius">‚ôí Aquarius</option>
                                    <option value="Pisces">‚ôì Pisces</option>
                                </select>
                            </div>
                            <div style="margin-bottom: 16px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Date:</label>
                                <input type="date" id="person2-date" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                            </div>
                        </div>
                    </div>
                    <button onclick="calculateCompatibility()" class="btn btn-primary" style="width: 100%; margin-bottom: 24px;">Check Compatibility</button>
                    <div id="compatibility-result" style="display: none; padding: 20px; background: #f8f9fa; border-radius: 12px;">
                        <h4 style="margin-bottom: 16px; color: #667eea;">Compatibility Report</h4>
                        <div id="compatibility-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tarot Section -->
    <section id="tarot-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;">Tarot Reading</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                    <button onclick="navigateTo('history')" class="btn btn-secondary" style="font-size: 14px;">üìú History</button>
                </div>
            </div>
            <div style="max-width: 800px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;">Three-Card Tarot Reading</h3>
                    <p style="margin-bottom: 24px; color: #666;">Ask a question and draw three cards for Past, Present, and Future.</p>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Your Question:</label>
                        <textarea id="tarot-question" placeholder="What do you want to know?" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; min-height: 80px; resize: vertical;"></textarea>
                    </div>
                    <button onclick="drawTarotCards()" class="btn btn-primary" style="width: 100%; margin-bottom: 24px;">Draw Cards</button>
                    <div id="tarot-result" style="display: none;">
                        <div id="tarot-cards" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px;"></div>
                        <div id="tarot-reading" style="padding: 20px; background: #f8f9fa; border-radius: 12px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="numerology-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;">Numerology</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                    <button onclick="navigateTo('profile')" class="btn btn-secondary" style="font-size: 14px;">üë§ Profile</button>
                </div>
            </div>
            <div style="max-width: 600px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;">Calculate Your Life Path Number</h3>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Enter your birth date:</label>
                        <input type="date" id="numerology-birthdate" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Enter your full name:</label>
                        <input type="text" id="numerology-name" placeholder="e.g., John Smith" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    </div>
                    <button onclick="calculateNumerology()" class="btn btn-primary" style="width: 100%; margin-bottom: 24px;">Calculate</button>
                    <div id="numerology-result" style="display: none; padding: 20px; background: #f8f9fa; border-radius: 12px;">
                        <h4 style="margin-bottom: 16px; color: #667eea;">Your Numerology Report</h4>
                        <div id="numerology-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- User Profile Section -->
    <section id="profile-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;">User Profile</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                    <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 14px;">üîÆ Kundli</button>
                </div>
            </div>
            <div style="max-width: 800px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;">Manage Your Profile</h3>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Name:</label>
                        <input type="text" id="profile-name" placeholder="Your name" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Date:</label>
                        <input type="date" id="profile-birthdate" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Time:</label>
                        <input type="time" id="profile-birthtime" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Birth Place:</label>
                        <input type="text" id="profile-birthplace" placeholder="City, Country" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Zodiac Sign:</label>
                        <select id="profile-zodiac" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                            <option value="Aries">‚ôà Aries</option>
                            <option value="Taurus">‚ôâ Taurus</option>
                            <option value="Gemini">‚ôä Gemini</option>
                            <option value="Cancer">‚ôã Cancer</option>
                            <option value="Leo">‚ôå Leo</option>
                            <option value="Virgo">‚ôç Virgo</option>
                            <option value="Libra">‚ôé Libra</option>
                            <option value="Scorpio">‚ôè Scorpio</option>
                            <option value="Sagittarius">‚ôê Sagittarius</option>
                            <option value="Capricorn">‚ôë Capricorn</option>
                            <option value="Aquarius">‚ôí Aquarius</option>
                            <option value="Pisces">‚ôì Pisces</option>
                        </select>
                    </div>
                    <button onclick="saveProfile()" class="btn btn-primary" style="width: 100%; margin-bottom: 16px;">Save Profile</button>
                    <div id="profile-saved" style="display: none; padding: 12px; background: #d4edda; color: #155724; border-radius: 8px; margin-bottom: 16px;">Profile saved successfully!</div>
                    <div id="profile-info" style="padding: 20px; background: #f8f9fa; border-radius: 12px; margin-top: 24px;">
                        <h4 style="margin-bottom: 12px; color: #667eea;">Current Profile</h4>
                        <div id="profile-display">No profile saved yet. Fill in the form above to create your profile.</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Panchang Section -->
    <section id="panchang-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;" id="panchang-title">Panchang</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                </div>
            </div>
            <div style="max-width: 1000px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;" id="panchang-subtitle">Today's Panchang</h3>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;" id="panchang-date-label">Select Date:</label>
                        <input type="date" id="panchang-date" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;" value="">
                    </div>
                    <button onclick="generatePanchang()" class="btn btn-primary" style="width: 100%; margin-bottom: 24px;" id="panchang-generate-btn">Get Panchang</button>
                    <div id="panchang-result" style="display: none;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 24px;">
                            <div style="padding: 20px; background: #f8f9fa; border-radius: 12px;">
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;" id="panchang-tithi-label">Tithi</div>
                                <div style="font-size: 24px; font-weight: 700; color: #667eea;" id="panchang-tithi-value">-</div>
                            </div>
                            <div style="padding: 20px; background: #f8f9fa; border-radius: 12px;">
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;" id="panchang-nakshatra-label">Nakshatra</div>
                                <div style="font-size: 24px; font-weight: 700; color: #667eea;" id="panchang-nakshatra-value">-</div>
                            </div>
                            <div style="padding: 20px; background: #f8f9fa; border-radius: 12px;">
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;" id="panchang-yoga-label">Yoga</div>
                                <div style="font-size: 24px; font-weight: 700; color: #667eea;" id="panchang-yoga-value">-</div>
                            </div>
                            <div style="padding: 20px; background: #f8f9fa; border-radius: 12px;">
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;" id="panchang-karana-label">Karana</div>
                                <div style="font-size: 24px; font-weight: 700; color: #667eea;" id="panchang-karana-value">-</div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 24px;">
                            <div style="padding: 20px; background: #f8f9fa; border-radius: 12px;">
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;" id="panchang-sunrise-label">Sunrise</div>
                                <div style="font-size: 20px; font-weight: 600; color: #667eea;" id="panchang-sunrise-value">-</div>
                            </div>
                            <div style="padding: 20px; background: #f8f9fa; border-radius: 12px;">
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;" id="panchang-sunset-label">Sunset</div>
                                <div style="font-size: 20px; font-weight: 600; color: #667eea;" id="panchang-sunset-value">-</div>
                            </div>
                        </div>
                        <div id="panchang-muhurat" style="padding: 20px; background: #e8f5e9; border-radius: 12px; margin-top: 24px;">
                            <h4 style="margin-bottom: 16px; color: #667eea;" id="panchang-muhurat-title">Auspicious Timings (Muhurat)</h4>
                            <div id="panchang-muhurat-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gemstone Section -->
    <section id="gemstone-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;" id="gemstone-title">Gemstone Recommendations</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                    <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 14px;">üîÆ Kundli</button>
                </div>
            </div>
            <div style="max-width: 900px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;" id="gemstone-subtitle">Find Your Perfect Gemstone</h3>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;" id="gemstone-sign-label">Zodiac Sign:</label>
                        <select id="gemstone-sign" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                            <option value="Aries">‚ôà Aries</option>
                            <option value="Taurus">‚ôâ Taurus</option>
                            <option value="Gemini">‚ôä Gemini</option>
                            <option value="Cancer">‚ôã Cancer</option>
                            <option value="Leo">‚ôå Leo</option>
                            <option value="Virgo">‚ôç Virgo</option>
                            <option value="Libra">‚ôé Libra</option>
                            <option value="Scorpio">‚ôè Scorpio</option>
                            <option value="Sagittarius">‚ôê Sagittarius</option>
                            <option value="Capricorn">‚ôë Capricorn</option>
                            <option value="Aquarius">‚ôí Aquarius</option>
                            <option value="Pisces">‚ôì Pisces</option>
                        </select>
                    </div>
                    <button onclick="getGemstoneRecommendation()" class="btn btn-primary" style="width: 100%; margin-bottom: 24px;" id="gemstone-get-btn">Get Recommendation</button>
                    <div id="gemstone-result" style="display: none;">
                        <div id="gemstone-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Vastu Section -->
    <section id="vastu-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;" id="vastu-title">Vastu Shastra Tips</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                </div>
            </div>
            <div style="max-width: 1000px; margin: 0 auto; padding: 40px;">
                <div style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 24px; color: #667eea;" id="vastu-subtitle">Vastu Tips for Your Space</h3>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;" id="vastu-type-label">Select Area:</label>
                        <select id="vastu-type" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                            <option value="home">üè† Home</option>
                            <option value="office">üè¢ Office</option>
                            <option value="bedroom">üõèÔ∏è Bedroom</option>
                            <option value="kitchen">üç≥ Kitchen</option>
                            <option value="living">üõãÔ∏è Living Room</option>
                            <option value="puja">üïâÔ∏è Puja Room</option>
                        </select>
                    </div>
                    <button onclick="getVastuTips()" class="btn btn-primary" style="width: 100%; margin-bottom: 24px;" id="vastu-get-btn">Get Vastu Tips</button>
                    <div id="vastu-result" style="display: none;">
                        <div id="vastu-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reading History Section -->
    <section id="history-section" class="section" style="display: none;">
        <div class="services">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <h2 class="section-title" style="margin: 0;">Reading History</h2>
                <div style="display: flex; gap: 12px;">
                    <button onclick="navigateTo('home')" class="btn btn-secondary" style="font-size: 14px;">üè† Home</button>
                </div>
            </div>
            <div style="max-width: 1000px; margin: 0 auto;">
                <div style="display: flex; gap: 16px; margin-bottom: 24px; flex-wrap: wrap;">
                    <button onclick="filterHistory('all')" class="btn btn-secondary" id="filter-all">All</button>
                    <button onclick="filterHistory('chat')" class="btn btn-secondary" id="filter-chat">Chat</button>
                    <button onclick="filterHistory('horoscope')" class="btn btn-secondary" id="filter-horoscope">Horoscope</button>
                    <button onclick="filterHistory('kundli')" class="btn btn-secondary" id="filter-kundli">Kundli</button>
                    <button onclick="filterHistory('compatibility')" class="btn btn-secondary" id="filter-compatibility">Compatibility</button>
                    <button onclick="filterHistory('tarot')" class="btn btn-secondary" id="filter-tarot">Tarot</button>
                    <button onclick="filterHistory('numerology')" class="btn btn-secondary" id="filter-numerology">Numerology</button>
                    <button onclick="clearHistory()" class="btn btn-secondary" style="margin-left: auto;">Clear All</button>
                </div>
                <div id="history-list" style="display: grid; gap: 16px;">
                    <!-- History items will be inserted here -->
                </div>
                <div id="history-empty" style="text-align: center; padding: 60px; color: #666; display: none;">
                    <p style="font-size: 18px;">No reading history yet. Start chatting or generate readings to see them here!</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2024 AI Astrologer. All rights reserved.</p>
            <p style="margin-top: 8px; opacity: 0.8;">Your trusted companion for astrological guidance</p>
        </div>
    </footer>

    <script>
        // CRITICAL: Make navigateTo available IMMEDIATELY before anything else
        window.navigateTo = function(section) {
            console.log('Early navigateTo called with:', section);
            if (!section) return;
            
            // Log navigation (if logging function is available)
            if (typeof saveActivityLog === 'function') {
                saveActivityLog('navigation', section, {
                    previousSection: window.currentSection || 'unknown',
                    userAction: 'tab_click',
                    method: 'early_navigateTo'
                });
                window.currentSection = section;
            }
            
            // Try immediate fallback navigation
            try {
                // Hide chat section first
                const chatSection = document.getElementById('chat-section');
                if (chatSection) {
                    chatSection.style.display = 'none';
                    chatSection.classList.remove('active');
                }
                
                if (section === 'chat') {
                    if (chatSection) {
                        document.querySelectorAll('.section').forEach(s => {
                            if (s) {
                                s.style.display = 'none';
                                s.classList.remove('active');
                            }
                        });
                        chatSection.style.display = 'flex';
                        chatSection.classList.add('active');
                        // Update nav
                        document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
                        const navChat = document.getElementById('nav-chat');
                        if (navChat) navChat.classList.add('active');
                        return;
                    }
                } else {
                    const targetSection = document.getElementById(section + '-section');
                    if (targetSection) {
                        // Hide all sections
                        document.querySelectorAll('.section').forEach(s => {
                            if (s) {
                                s.style.display = 'none';
                                s.classList.remove('active');
                            }
                        });
                        // Show target section
                        targetSection.style.display = 'block';
                        targetSection.classList.add('active');
                        // Update navigation
                        document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
                        const navLink = document.getElementById('nav-' + section);
                        if (navLink) navLink.classList.add('active');
                        // Scroll to top
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return;
                    }
                }
            } catch(e) {
                console.error('Navigation fallback error:', e);
                if (typeof saveActivityLog === 'function') {
                    saveActivityLog('error', section, {
                        error: e.message,
                        method: 'early_navigateTo'
                    });
                }
            }
            
            // If fallback didn't work, wait for real function
            setTimeout(function() {
                if (window._navigateTo && typeof window._navigateTo === 'function') {
                    window._navigateTo(section);
                } else if (typeof window.showSection === 'function') {
                    window.showSection(section);
                }
            }, 100);
        };
        
        let currentLanguage = localStorage.getItem('ai-astrologer-language') || 'en';
        let userSign = localStorage.getItem('ai-astrologer-sign') || 'Aries';
        let chatHistory = []; // Store conversation context
        let readingHistory = JSON.parse(localStorage.getItem('reading-history') || '[]');
        let currentSection = 'home'; // Track current section for logging
        window.currentSection = currentSection; // Make it globally accessible
        
        // Activity Logging System
        function saveActivityLog(action, section, details = {}) {
            try {
                const logEntry = {
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleString(),
                    action: action, // 'navigation', 'button_click', 'form_submit', etc.
                    section: section,
                    details: details,
                    userSign: userSign,
                    language: currentLanguage
                };
                
                // Get existing logs
                let activityLogs = JSON.parse(localStorage.getItem('activity-logs') || '[]');
                
                // Add new log entry
                activityLogs.push(logEntry);
                
                // Keep only last 1000 entries to prevent storage bloat
                if (activityLogs.length > 1000) {
                    activityLogs = activityLogs.slice(-1000);
                }
                
                // Save to localStorage
                localStorage.setItem('activity-logs', JSON.stringify(activityLogs));
                
                // Console log for debugging
                console.log('üìù Activity Logged:', {
                    time: logEntry.date,
                    action: action,
                    section: section,
                    details: details
                });
                
                return logEntry;
            } catch (error) {
                console.error('Error saving activity log:', error);
            }
        }
        
        // Function to get activity logs
        function getActivityLogs(limit = 100) {
            try {
                let logs = JSON.parse(localStorage.getItem('activity-logs') || '[]');
                return logs.slice(-limit).reverse(); // Return most recent first
            } catch (error) {
                console.error('Error getting activity logs:', error);
                return [];
            }
        }
        
        // Function to clear activity logs
        function clearActivityLogs() {
            try {
                localStorage.removeItem('activity-logs');
                console.log('Activity logs cleared');
                return true;
            } catch (error) {
                console.error('Error clearing activity logs:', error);
                return false;
            }
        }
        
        // Function to export logs as JSON
        function exportActivityLogs() {
            try {
                const logs = getActivityLogs(1000);
                const dataStr = JSON.stringify(logs, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `activity-logs-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                URL.revokeObjectURL(url);
                console.log('Activity logs exported');
            } catch (error) {
                console.error('Error exporting activity logs:', error);
            }
        }
        
        // Function to display logs in console
        function displayActivityLogs(limit = 50) {
            const logs = getActivityLogs(limit);
            console.group('üìã Activity Logs (Most Recent ' + logs.length + ' entries)');
            if (logs.length === 0) {
                console.log('No activity logs found.');
            } else {
                logs.forEach((log, index) => {
                    console.log(
                        `%c[${index + 1}] ${log.date}`,
                        'color: #667eea; font-weight: bold',
                        '\n  Action:', log.action,
                        '\n  Section:', log.section,
                        '\n  Details:', log.details
                    );
                });
            }
            console.groupEnd();
            return logs;
        }
        
        // Make logging functions globally available
        window.saveActivityLog = saveActivityLog;
        window.getActivityLogs = getActivityLogs;
        window.clearActivityLogs = clearActivityLogs;
        window.exportActivityLogs = exportActivityLogs;
        window.displayActivityLogs = displayActivityLogs;
        
        // Add helpful console message
        console.log('%cüìù Activity Logging Enabled!', 'color: #667eea; font-size: 14px; font-weight: bold');
        console.log('Use these commands in the console:');
        console.log('  - displayActivityLogs() - View recent activity logs');
        console.log('  - getActivityLogs(100) - Get last 100 logs as array');
        console.log('  - exportActivityLogs() - Download logs as JSON file');
        console.log('  - clearActivityLogs() - Clear all logs');
        
        // User profiles
        let userProfiles = JSON.parse(localStorage.getItem('user-profiles') || '[]');
        let currentProfile = JSON.parse(localStorage.getItem('current-profile') || 'null');
        let currentSection = 'home';

        const zodiacSigns = {
            'Aries': { symbol: '‚ôà', element: 'Fire', ruler: 'Mars', traits: ['Courageous', 'Determined', 'Confident', 'Enthusiastic'] },
            'Taurus': { symbol: '‚ôâ', element: 'Earth', ruler: 'Venus', traits: ['Reliable', 'Patient', 'Practical', 'Devoted'] },
            'Gemini': { symbol: '‚ôä', element: 'Air', ruler: 'Mercury', traits: ['Gentle', 'Affectionate', 'Curious', 'Adaptable'] },
            'Cancer': { symbol: '‚ôã', element: 'Water', ruler: 'Moon', traits: ['Tenacious', 'Highly imaginative', 'Loyal', 'Emotional'] },
            'Leo': { symbol: '‚ôå', element: 'Fire', ruler: 'Sun', traits: ['Creative', 'Passionate', 'Generous', 'Warm-hearted'] },
            'Virgo': { symbol: '‚ôç', element: 'Earth', ruler: 'Mercury', traits: ['Loyal', 'Analytical', 'Kind', 'Hardworking'] },
            'Libra': { symbol: '‚ôé', element: 'Air', ruler: 'Venus', traits: ['Cooperative', 'Diplomatic', 'Gracious', 'Fair-minded'] },
            'Scorpio': { symbol: '‚ôè', element: 'Water', ruler: 'Mars and Pluto', traits: ['Resourceful', 'Brave', 'Passionate', 'Stubborn'] },
            'Sagittarius': { symbol: '‚ôê', element: 'Fire', ruler: 'Jupiter', traits: ['Generous', 'Idealistic', 'Great sense of humor'] },
            'Capricorn': { symbol: '‚ôë', element: 'Earth', ruler: 'Saturn', traits: ['Responsible', 'Disciplined', 'Self-control', 'Good managers'] },
            'Aquarius': { symbol: '‚ôí', element: 'Air', ruler: 'Saturn and Uranus', traits: ['Progressive', 'Original', 'Independent', 'Humanitarian'] },
            'Pisces': { symbol: '‚ôì', element: 'Water', ruler: 'Jupiter and Neptune', traits: ['Compassionate', 'Artistic', 'Intuitive', 'Gentle'] }
        };

        const translations = {
            en: {
                appName: 'AI Astrology',
                heroTitle: 'Welcome to AI Astrology',
                heroSubtitle: 'Your Personal AI Astrologer - Get Instant Astrological Guidance',
                servicesTitle: 'Our Services',
                serviceHoroscope: 'Daily Horoscope',
                serviceHoroscopeDesc: 'Get your daily, weekly, and monthly horoscope predictions based on your zodiac sign.',
                serviceKundli: 'Kundli / Birth Chart',
                serviceKundliDesc: 'Generate your complete birth chart and understand your planetary positions.',
                serviceMatchmaking: 'Matchmaking',
                serviceMatchmakingDesc: 'Check compatibility between two people based on their zodiac signs and birth details.',
                serviceTarot: 'Tarot Reading',
                serviceTarotDesc: 'Get insights into your future through AI-powered tarot card readings.',
                serviceNumerology: 'Numerology',
                serviceNumerologyDesc: 'Discover your life path number and understand its significance.',
                servicePanchang: 'Panchang',
                servicePanchangDesc: 'Check today\'s Tithi, Nakshatra, Yoga, Karana, and auspicious timings.',
                serviceGemstone: 'Gemstone Recommendations',
                serviceGemstoneDesc: 'Discover the perfect gemstone based on your zodiac sign and planetary positions.',
                serviceVastu: 'Vastu Tips',
                serviceVastuDesc: 'Get Vastu Shastra recommendations for your home and office arrangement.',
                serviceChat: 'AI Astrologer Chat',
                serviceChatDesc: 'Chat with our AI astrologer for instant answers to all your astrology questions.',
                horoscopeTitle: 'Your Horoscope',
                dailyTitle: 'Daily Horoscope',
                weeklyTitle: 'Weekly Horoscope',
                monthlyTitle: 'Monthly Horoscope',
                yearlyTitle: 'Yearly Horoscope',
                panchangTitle: 'Panchang',
                panchangSubtitle: 'Today\'s Panchang',
                panchangDateLabel: 'Select Date:',
                panchangGenerateBtn: 'Get Panchang',
                panchangTithiLabel: 'Tithi',
                panchangNakshatraLabel: 'Nakshatra',
                panchangYogaLabel: 'Yoga',
                panchangKaranaLabel: 'Karana',
                panchangSunriseLabel: 'Sunrise',
                panchangSunsetLabel: 'Sunset',
                panchangMuhuratTitle: 'Auspicious Timings (Muhurat)',
                gemstoneTitle: 'Gemstone Recommendations',
                gemstoneSubtitle: 'Find Your Perfect Gemstone',
                gemstoneSignLabel: 'Zodiac Sign:',
                gemstoneGetBtn: 'Get Recommendation',
                vastuTitle: 'Vastu Shastra Tips',
                vastuSubtitle: 'Vastu Tips for Your Space',
                vastuTypeLabel: 'Select Area:',
                vastuGetBtn: 'Get Vastu Tips',
                chatHeaderTitle: 'üí¨ Chat with AI Astrologer',
                chatHeaderSubtitle: 'Ask anything about astrology',
                chatPlaceholder: 'Type your message...',
                send: 'Send',
                welcome: 'Welcome! I\'m your AI Astrologer. How can I help you today?',
                langBtn: 'üá¨üáß English',
                signBtn: 'Select Sign'
            },
            hi: {
                appName: 'AI Astrology',
                heroTitle: 'AI Astrology ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à',
                heroSubtitle: '‡§Ü‡§™‡§ï‡§æ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ AI ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑‡•Ä - ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑‡•Ä‡§Ø ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                servicesTitle: '‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                serviceHoroscope: '‡§¶‡•à‡§®‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤',
                serviceHoroscopeDesc: '‡§Ö‡§™‡§®‡•á ‡§∞‡§æ‡§∂‡§ø ‡§ö‡§ø‡§®‡•ç‡§π ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§Ö‡§™‡§®‡•á ‡§¶‡•à‡§®‡§ø‡§ï, ‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§î‡§∞ ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡§ø‡§Ø‡§æ‡§Ç ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§',
                serviceKundli: '‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä / ‡§ú‡§®‡•ç‡§Æ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä',
                serviceKundliDesc: '‡§Ö‡§™‡§®‡•Ä ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ú‡§®‡•ç‡§Æ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§ó‡•ç‡§∞‡§π‡•Ä‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡•á‡§Ç‡•§',
                serviceMatchmaking: '‡§µ‡§ø‡§µ‡§æ‡§π ‡§Æ‡§ø‡§≤‡§æ‡§®',
                serviceMatchmakingDesc: '‡§¶‡•ã ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§∞‡§æ‡§∂‡§ø ‡§ö‡§ø‡§®‡•ç‡§π ‡§î‡§∞ ‡§ú‡§®‡•ç‡§Æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§',
                serviceTarot: '‡§§‡§æ‡§∞‡•ã ‡§∞‡•Ä‡§°‡§ø‡§Ç‡§ó',
                serviceTarotDesc: 'AI-‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§§‡§æ‡§∞‡•ã ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∞‡•Ä‡§°‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Ö‡§™‡§®‡•á ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§¶‡•É‡§∑‡•ç‡§ü‡§ø ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§',
                serviceNumerology: '‡§Ö‡§Ç‡§ï ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑',
                serviceNumerologyDesc: '‡§Ö‡§™‡§®‡§æ ‡§ú‡•Ä‡§µ‡§® ‡§™‡§• ‡§®‡§Ç‡§¨‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç ‡§î‡§∞ ‡§á‡§∏‡§ï‡•á ‡§Æ‡§π‡§§‡•ç‡§µ ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡•á‡§Ç‡•§',
                servicePanchang: '‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó',
                servicePanchangDesc: '‡§Ü‡§ú ‡§ï‡•Ä ‡§§‡§ø‡§•‡§ø, ‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞, ‡§Ø‡•ã‡§ó, ‡§ï‡§∞‡§£ ‡§î‡§∞ ‡§∂‡•Å‡§≠ ‡§∏‡§Æ‡§Ø ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§',
                serviceGemstone: '‡§∞‡§§‡•ç‡§® ‡§∏‡•Å‡§ù‡§æ‡§µ',
                serviceGemstoneDesc: '‡§Ö‡§™‡§®‡•á ‡§∞‡§æ‡§∂‡§ø ‡§ö‡§ø‡§®‡•ç‡§π ‡§î‡§∞ ‡§ó‡•ç‡§∞‡§π‡•Ä‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§∏‡§π‡•Ä ‡§∞‡§§‡•ç‡§® ‡§ñ‡•ã‡§ú‡•á‡§Ç‡•§',
                serviceVastu: '‡§µ‡§æ‡§∏‡•ç‡§§‡•Å ‡§∏‡•Å‡§ù‡§æ‡§µ',
                serviceVastuDesc: '‡§Ö‡§™‡§®‡•á ‡§ò‡§∞ ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§ï‡•Ä ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§æ‡§∏‡•ç‡§§‡•Å ‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§',
                serviceChat: 'AI ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑‡•Ä ‡§ö‡•à‡§ü',
                serviceChatDesc: '‡§Ö‡§™‡§®‡•á ‡§∏‡§≠‡•Ä ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•á ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§â‡§§‡•ç‡§§‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡§Æ‡§æ‡§∞‡•á AI ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑‡•Ä ‡§∏‡•á ‡§ö‡•à‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§',
                horoscopeTitle: '‡§Ü‡§™‡§ï‡§æ ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤',
                dailyTitle: '‡§¶‡•à‡§®‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤',
                weeklyTitle: '‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤',
                monthlyTitle: '‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤',
                yearlyTitle: '‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤',
                panchangTitle: '‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó',
                panchangSubtitle: '‡§Ü‡§ú ‡§ï‡§æ ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó',
                panchangDateLabel: '‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§ö‡•Å‡§®‡•á‡§Ç:',
                panchangGenerateBtn: '‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                panchangTithiLabel: '‡§§‡§ø‡§•‡§ø',
                panchangNakshatraLabel: '‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞',
                panchangYogaLabel: '‡§Ø‡•ã‡§ó',
                panchangKaranaLabel: '‡§ï‡§∞‡§£',
                panchangSunriseLabel: '‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø',
                panchangSunsetLabel: '‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§',
                panchangMuhuratTitle: '‡§∂‡•Å‡§≠ ‡§∏‡§Æ‡§Ø (‡§Æ‡•Å‡§π‡•Ç‡§∞‡•ç‡§§)',
                gemstoneTitle: '‡§∞‡§§‡•ç‡§® ‡§∏‡•Å‡§ù‡§æ‡§µ',
                gemstoneSubtitle: '‡§Ö‡§™‡§®‡§æ ‡§∏‡§π‡•Ä ‡§∞‡§§‡•ç‡§® ‡§ñ‡•ã‡§ú‡•á‡§Ç',
                gemstoneSignLabel: '‡§∞‡§æ‡§∂‡§ø ‡§ö‡§ø‡§®‡•ç‡§π:',
                gemstoneGetBtn: '‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                vastuTitle: '‡§µ‡§æ‡§∏‡•ç‡§§‡•Å ‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞ ‡§∏‡•Å‡§ù‡§æ‡§µ',
                vastuSubtitle: '‡§Ü‡§™‡§ï‡•á ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§æ‡§∏‡•ç‡§§‡•Å ‡§∏‡•Å‡§ù‡§æ‡§µ',
                vastuTypeLabel: '‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç:',
                vastuGetBtn: '‡§µ‡§æ‡§∏‡•ç‡§§‡•Å ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                chatHeaderTitle: 'üí¨ AI ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑‡•Ä ‡§∏‡•á ‡§ö‡•à‡§ü ‡§ï‡§∞‡•á‡§Ç',
                chatHeaderSubtitle: '‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç',
                chatPlaceholder: '‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç...',
                send: '‡§≠‡•á‡§ú‡•á‡§Ç',
                welcome: '‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ AI ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑‡•Ä ‡§π‡•Ç‡§Ç‡•§ ‡§Ü‡§ú ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?',
                langBtn: 'üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä',
                signBtn: '‡§∞‡§æ‡§∂‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç'
            }
        };

        const dailyReadings = {
            en: {
                'Aries': 'Today, Aries, your fiery energy is at its peak. The stars align to bring you opportunities for leadership. Trust your instincts and take bold action. Your natural confidence will guide you through any challenges.',
                'Taurus': 'Dear Taurus, today brings stability and comfort. Focus on your long-term goals and don\'t rush decisions. Your patience will be rewarded. Take time to appreciate the beauty around you.',
                'Gemini': 'Gemini, your curiosity is heightened today. Communication flows easily, making it a perfect time for important conversations. Embrace new ideas and connections that come your way.',
                'Cancer': 'Cancer, your emotional intuition is strong today. Listen to your inner voice and trust your feelings. Nurture your relationships and create a safe space for yourself and loved ones.',
                'Leo': 'Leo, your creative spark shines brightly today. This is your moment to express yourself and share your talents. Your natural charisma will attract positive attention and opportunities.',
                'Virgo': 'Virgo, today is ideal for organization and attention to detail. Your analytical mind will help you solve complex problems. Take care of your health and maintain your routines.',
                'Libra': 'Libra, balance and harmony are your focus today. Seek fairness in all situations and use your diplomatic skills. Your relationships will benefit from your thoughtful approach.',
                'Scorpio': 'Scorpio, your intensity and passion are powerful today. Deep transformations are possible if you\'re willing to let go of what no longer serves you. Trust the process.',
                'Sagittarius': 'Sagittarius, adventure and learning call to you today. Expand your horizons through travel, education, or new experiences. Your optimism will inspire others.',
                'Capricorn': 'Capricorn, your ambition drives you forward today. Focus on your career goals and long-term plans. Your discipline and hard work will bring tangible results.',
                'Aquarius': 'Aquarius, innovation and originality are your strengths today. Think outside the box and embrace your unique perspective. Your humanitarian spirit will make a difference.',
                'Pisces': 'Pisces, your intuition and creativity are heightened today. Trust your dreams and artistic impulses. Compassion and empathy will guide you in helping others.'
            },
            hi: {
                'Aries': '‡§Ü‡§ú, ‡§Æ‡•á‡§∑ ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§ó ‡§ï‡•Ä ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§Ö‡§™‡§®‡•á ‡§ö‡§∞‡§Æ ‡§™‡§∞ ‡§π‡•à‡•§ ‡§∏‡§ø‡§§‡§æ‡§∞‡•á ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ ‡§ï‡•á ‡§Ö‡§µ‡§∏‡§∞ ‡§≤‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§∞‡•á‡§ñ‡§ø‡§§ ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§™‡§∞ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§æ‡§π‡§∏‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§Ü‡§™‡§ï‡•ã ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§ö‡•Å‡§®‡•å‡§§‡•Ä ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡§∞‡•á‡§ó‡§æ‡•§',
                'Taurus': '‡§™‡•ç‡§∞‡§ø‡§Ø ‡§µ‡•É‡§∑ ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ ‡§î‡§∞ ‡§Ü‡§∞‡§æ‡§Æ ‡§≤‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§Ö‡§™‡§®‡•á ‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡§ø‡§ï ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç ‡§î‡§∞ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ú‡§≤‡•ç‡§¶‡§¨‡§æ‡§ú‡•Ä ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•Ä ‡§ß‡•à‡§∞‡•ç‡§Ø‡§§‡§æ ‡§ï‡§æ ‡§´‡§≤ ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ‡•§ ‡§Ö‡§™‡§®‡•á ‡§Ü‡§∏-‡§™‡§æ‡§∏ ‡§ï‡•Ä ‡§∏‡•Å‡§Ç‡§¶‡§∞‡§§‡§æ ‡§ï‡•Ä ‡§∏‡§∞‡§æ‡§π‡§®‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Æ‡§Ø ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç‡•§',
                'Gemini': '‡§Æ‡§ø‡§•‡•Å‡§® ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä ‡§ú‡§ø‡§ú‡•ç‡§û‡§æ‡§∏‡§æ ‡§¨‡§¢‡§º ‡§ó‡§à ‡§π‡•à‡•§ ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§Ü‡§∏‡§æ‡§®‡•Ä ‡§∏‡•á ‡§¨‡§π‡§§‡§æ ‡§π‡•à, ‡§ú‡•ã ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§¨‡§æ‡§§‡§ö‡•Ä‡§§ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§∏‡§Æ‡§Ø ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§®‡§è ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§î‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§Ö‡§™‡§®‡§æ‡§è‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•á ‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§§‡•á ‡§π‡•à‡§Ç‡•§',
                'Cancer': '‡§ï‡§∞‡•ç‡§ï ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä ‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ú‡•ç‡§û‡§æ‡§® ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§π‡•à‡•§ ‡§Ö‡§™‡§®‡•Ä ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§µ‡§®‡§æ‡§ì‡§Ç ‡§™‡§∞ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ö‡§™‡§®‡•á ‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ã‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§î‡§∞ ‡§™‡•ç‡§∞‡§ø‡§Ø‡§ú‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡•ç‡§•‡§æ‡§® ‡§¨‡§®‡§æ‡§è‡§Ç‡•§',
                'Leo': '‡§∏‡§ø‡§Ç‡§π ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä ‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ö‡§ø‡§Ç‡§ó‡§æ‡§∞‡•Ä ‡§ö‡§Æ‡§ï ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§Ø‡§π ‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§™‡§®‡•á ‡§Ü‡§™ ‡§ï‡•ã ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§ï‡•ç‡§∑‡§£ ‡§π‡•à‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§ï‡§∞‡§ø‡§∂‡•ç‡§Æ‡§æ ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§î‡§∞ ‡§Ö‡§µ‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§Ü‡§ï‡§∞‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§',
                'Virgo': '‡§ï‡§®‡•ç‡§Ø‡§æ ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§∏‡§Ç‡§ó‡§†‡§® ‡§î‡§∞ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§π‡•à‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£‡§æ‡§§‡•ç‡§Æ‡§ï ‡§¶‡§ø‡§Æ‡§æ‡§ó ‡§Ü‡§™‡§ï‡•ã ‡§ú‡§ü‡§ø‡§≤ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§π‡§≤ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§ ‡§Ö‡§™‡§®‡•á ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∞‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§¶‡§ø‡§®‡§ö‡§∞‡•ç‡§Ø‡§æ ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç‡•§',
                'Libra': '‡§§‡•Å‡§≤‡§æ ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§∏‡§Ç‡§§‡•Å‡§≤‡§® ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§Ç‡§ú‡§∏‡•ç‡§Ø ‡§Ü‡§™‡§ï‡§æ ‡§´‡•ã‡§ï‡§∏ ‡§π‡•à‡•§ ‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∑‡•ç‡§™‡§ï‡•ç‡§∑‡§§‡§æ ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§ï‡•Ç‡§ü‡§®‡•Ä‡§§‡§ø‡§ï ‡§ï‡•å‡§∂‡§≤ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•á ‡§∞‡§ø‡§∂‡•ç‡§§‡•á ‡§Ü‡§™‡§ï‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞‡§∂‡•Ä‡§≤ ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§∏‡•á ‡§≤‡§æ‡§≠‡§æ‡§®‡•ç‡§µ‡§ø‡§§ ‡§π‡•ã‡§Ç‡§ó‡•á‡•§',
                'Scorpio': '‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ ‡§î‡§∞ ‡§ú‡•Å‡§®‡•Ç‡§® ‡§∂‡§ï‡•ç‡§§‡§ø‡§∂‡§æ‡§≤‡•Ä ‡§π‡•à‡•§ ‡§ó‡§π‡§∞‡•á ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à‡§Ç ‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§â‡§∏ ‡§ö‡•Ä‡§ú‡§º ‡§ï‡•ã ‡§õ‡•ã‡§°‡§º‡§®‡•á ‡§ï‡•á ‡§á‡§ö‡•ç‡§õ‡•Å‡§ï ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡•á‡§µ‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡•Ä‡•§ ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡§∞ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§',
                'Sagittarius': '‡§ß‡§®‡•Å ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§∏‡§æ‡§π‡§∏‡§ø‡§ï ‡§î‡§∞ ‡§∏‡•Ä‡§ñ‡§®‡•á ‡§ï‡•Ä ‡§™‡•Å‡§ï‡§æ‡§∞ ‡§Ü‡§™‡§ï‡•ã ‡§¨‡•Å‡§≤‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ, ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ, ‡§Ø‡§æ ‡§®‡§è ‡§Ö‡§®‡•Å‡§≠‡§µ‡•ã‡§Ç ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Ö‡§™‡§®‡•á ‡§ï‡•ç‡§∑‡§ø‡§§‡§ø‡§ú ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§Ü‡§∂‡§æ‡§µ‡§æ‡§¶ ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§',
                'Capricorn': '‡§Æ‡§ï‡§∞ ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ï‡§æ‡§Ç‡§ï‡•ç‡§∑‡§æ ‡§Ü‡§™‡§ï‡•ã ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§Ö‡§™‡§®‡•á ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø‡•ã‡§Ç ‡§î‡§∞ ‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡§ø‡§ï ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§î‡§∞ ‡§ï‡§°‡§º‡•Ä ‡§Æ‡•á‡§π‡§®‡§§ ‡§Æ‡•Ç‡§∞‡•ç‡§§ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§≤‡§æ‡§è‡§ó‡•Ä‡•§',
                'Aquarius': '‡§ï‡•Å‡§Ç‡§≠ ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§®‡§µ‡§æ‡§ö‡§æ‡§∞ ‡§î‡§∞ ‡§Æ‡•å‡§≤‡§ø‡§ï‡§§‡§æ ‡§Ü‡§™‡§ï‡•Ä ‡§§‡§æ‡§ï‡§§ ‡§π‡•à‡•§ ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞ ‡§∏‡•ã‡§ö‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§Ö‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§ï‡•ã ‡§Ö‡§™‡§®‡§æ‡§è‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§æ‡§®‡§µ‡•Ä‡§Ø ‡§≠‡§æ‡§µ‡§®‡§æ ‡§è‡§ï ‡§´‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§ó‡•Ä‡•§',
                'Pisces': '‡§Æ‡•Ä‡§® ‡§∞‡§æ‡§∂‡§ø, ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï‡§§‡§æ ‡§¨‡§¢‡§º ‡§ó‡§à ‡§π‡•à‡•§ ‡§Ö‡§™‡§®‡•á ‡§∏‡§™‡§®‡•ã‡§Ç ‡§î‡§∞ ‡§ï‡§≤‡§æ‡§§‡•ç‡§Æ‡§ï ‡§Ü‡§µ‡•á‡§ó‡•ã‡§Ç ‡§™‡§∞ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ï‡§∞‡•Å‡§£‡§æ ‡§î‡§∞ ‡§∏‡§π‡§æ‡§®‡•Å‡§≠‡•Ç‡§§‡§ø ‡§Ü‡§™‡§ï‡•ã ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡§∞‡•á‡§ó‡•Ä‡•§'
            }
        };

        function t(key) {
            return translations[currentLanguage][key] || translations.en[key] || key;
        }

        function getSignInfo(sign) {
            return zodiacSigns[sign] || zodiacSigns['Aries'];
        }

        function updateUI() {
            try {
                const elements = {
                    'app-logo': t('appName'),
                    'hero-title': t('heroTitle'),
                    'hero-subtitle': t('heroSubtitle'),
                    'services-title': t('servicesTitle'),
                    'service-horoscope': t('serviceHoroscope'),
                    'service-horoscope-desc': t('serviceHoroscopeDesc'),
                    'service-kundli': t('serviceKundli'),
                    'service-kundli-desc': t('serviceKundliDesc'),
                    'service-matchmaking': t('serviceMatchmaking'),
                    'service-matchmaking-desc': t('serviceMatchmakingDesc'),
                    'service-tarot': t('serviceTarot'),
                    'service-tarot-desc': t('serviceTarotDesc'),
                    'service-numerology': t('serviceNumerology'),
                    'service-numerology-desc': t('serviceNumerologyDesc'),
                    'service-panchang': t('servicePanchang'),
                    'service-panchang-desc': t('servicePanchangDesc'),
                    'service-gemstone': t('serviceGemstone'),
                    'service-gemstone-desc': t('serviceGemstoneDesc'),
                    'service-vastu': t('serviceVastu'),
                    'service-vastu-desc': t('serviceVastuDesc'),
                    'service-chat': t('serviceChat'),
                    'service-chat-desc': t('serviceChatDesc'),
                    'horoscope-title': t('horoscopeTitle'),
                    'daily-title': t('dailyTitle'),
                    'weekly-title': t('weeklyTitle'),
                    'monthly-title': t('monthlyTitle'),
                    'yearly-title': t('yearlyTitle'),
                    'panchang-title': t('panchangTitle'),
                    'panchang-subtitle': t('panchangSubtitle'),
                    'panchang-date-label': t('panchangDateLabel'),
                    'panchang-generate-btn': t('panchangGenerateBtn'),
                    'panchang-tithi-label': t('panchangTithiLabel'),
                    'panchang-nakshatra-label': t('panchangNakshatraLabel'),
                    'panchang-yoga-label': t('panchangYogaLabel'),
                    'panchang-karana-label': t('panchangKaranaLabel'),
                    'panchang-sunrise-label': t('panchangSunriseLabel'),
                    'panchang-sunset-label': t('panchangSunsetLabel'),
                    'panchang-muhurat-title': t('panchangMuhuratTitle'),
                    'gemstone-title': t('gemstoneTitle'),
                    'gemstone-subtitle': t('gemstoneSubtitle'),
                    'gemstone-sign-label': t('gemstoneSignLabel'),
                    'gemstone-get-btn': t('gemstoneGetBtn'),
                    'vastu-title': t('vastuTitle'),
                    'vastu-subtitle': t('vastuSubtitle'),
                    'vastu-type-label': t('vastuTypeLabel'),
                    'vastu-get-btn': t('vastuGetBtn'),
                    'chat-header-title': t('chatHeaderTitle'),
                    'chat-header-subtitle': t('chatHeaderSubtitle'),
                    'user-input': { type: 'placeholder', value: t('chatPlaceholder') },
                    'send-btn': t('send'),
                    'lang-btn': t('langBtn')
                };
                
                for (const [id, value] of Object.entries(elements)) {
                    const el = document.getElementById(id);
                    if (el) {
                        if (typeof value === 'object' && value.type === 'placeholder') {
                            el.placeholder = value.value;
                        } else {
                            el.textContent = value;
                        }
                    }
                }
                
                const signInfo = getSignInfo(userSign);
                const signBtn = document.getElementById('sign-btn');
                if (signBtn) {
                    signBtn.innerHTML = `<span style="font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif;">${signInfo.symbol}</span> ${userSign}`;
                }
                
                // Update logo
                const appLogo = document.getElementById('app-logo');
                if (appLogo) {
                    const logoIcon = appLogo.querySelector('.logo-icon');
                    const logoText = appLogo.querySelector('span:last-child');
                    if (logoIcon && logoText) {
                        logoText.textContent = t('appName');
                    } else {
                        appLogo.innerHTML = `<span class="logo-icon">üåü</span><span>${t('appName')}</span>`;
                    }
                }
                
                updateHoroscope();
                updateQuickInsights();
            } catch (error) {
                console.error('Error in updateUI:', error);
            }
        }
        
        // New Feature: Update Quick Insights
        function updateQuickInsights() {
            try {
                const signInfo = getSignInfo(userSign);
                const signNames = Object.keys(zodiacSigns);
                const signIndex = signNames.indexOf(userSign);
                
                // Calculate lucky number based on sign and date
                const today = new Date();
                const day = today.getDate();
                const month = today.getMonth() + 1;
                const luckyNum = ((signIndex + 1) * day + month) % 9 + 1;
                const luckyNumberEl = document.getElementById('lucky-number');
                if (luckyNumberEl) luckyNumberEl.textContent = luckyNum;
                
                // Lucky colors based on element
                const colors = {
                    'Fire': ['Red', 'Orange', 'Gold'],
                    'Earth': ['Brown', 'Green', 'Yellow'],
                    'Air': ['Blue', 'White', 'Silver'],
                    'Water': ['Blue', 'Purple', 'Teal']
                };
                const colorList = colors[signInfo.element] || ['Blue', 'Purple'];
                const luckyColor = colorList[day % colorList.length];
                const luckyColorEl = document.getElementById('lucky-color');
                if (luckyColorEl) luckyColorEl.textContent = luckyColor;
                
                // Lucky time based on sign
                const times = ['6:00 AM - 9:00 AM', '9:00 AM - 12:00 PM', '12:00 PM - 3:00 PM', '3:00 PM - 6:00 PM', '6:00 PM - 9:00 PM', '9:00 PM - 12:00 AM'];
                const luckyTime = times[signIndex % times.length];
                const luckyTimeEl = document.getElementById('lucky-time');
                if (luckyTimeEl) luckyTimeEl.textContent = luckyTime;
                
                // Moon phase (simplified calculation)
                const moonPhases = ['New Moon', 'Waxing Crescent', 'First Quarter', 'Waxing Gibbous', 'Full Moon', 'Waning Gibbous', 'Last Quarter', 'Waning Crescent'];
                const daysSinceNewMoon = (day + month * 30) % 29;
                const moonPhase = moonPhases[Math.floor(daysSinceNewMoon / 3.6)];
                const moonPhaseEl = document.getElementById('moon-phase');
                if (moonPhaseEl) moonPhaseEl.textContent = moonPhase;
            } catch (error) {
                console.error('Error updating quick insights:', error);
            }
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'hi' : 'en';
            localStorage.setItem('ai-astrologer-language', currentLanguage);
            updateUI();
        }

        function toggleSignMenu() {
            document.getElementById('sign-menu').classList.toggle('show');
        }

        function selectSign(sign) {
            userSign = sign;
            localStorage.setItem('ai-astrologer-sign', sign);
            document.getElementById('sign-menu').classList.remove('show');
            updateUI();
        }

        function showSection(section) {
            try {
                if (!section) {
                    console.error('showSection called without section parameter');
                    return;
                }
                
                console.log('Navigating to section:', section);
                
                // Hide all sections immediately
                const sections = document.querySelectorAll('.section');
                if (sections.length === 0) {
                    console.warn('No sections found to hide');
                }
                sections.forEach(s => {
                    if (s) {
                        s.style.display = 'none';
                        s.classList.remove('active');
                    }
                });
                
                // Hide chat section
                const chatSection = document.getElementById('chat-section');
                if (chatSection) {
                    chatSection.style.display = 'none';
                    chatSection.classList.remove('active');
                }
                
                // Remove active class from all nav links
                const navLinks = document.querySelectorAll('.nav-links a');
                navLinks.forEach(a => {
                    if (a) a.classList.remove('active');
                });
                
                let sectionFound = false;
                
                // Show selected section
                if (section === 'home') {
                    const homeSection = document.getElementById('home-section');
                    const navHome = document.getElementById('nav-home');
                    if (homeSection) {
                        homeSection.style.display = 'block';
                        homeSection.classList.add('active');
                        sectionFound = true;
                        console.log('Home section shown');
                        updateQuickInsights();
                    } else {
                        console.error('Home section not found!');
                    }
                    if (navHome) navHome.classList.add('active');
                } else if (section === 'horoscope') {
                    const horoscopeSection = document.getElementById('horoscope-section');
                    const navHoroscope = document.getElementById('nav-horoscope');
                    if (horoscopeSection) {
                        horoscopeSection.style.display = 'block';
                        horoscopeSection.classList.add('active');
                        sectionFound = true;
                        console.log('Horoscope section shown');
                    } else {
                        console.error('Horoscope section not found!');
                    }
                    if (navHoroscope) navHoroscope.classList.add('active');
                    if (typeof updateHoroscope === 'function') {
                        try {
                            setTimeout(() => updateHoroscope(), 200);
                        } catch (err) {
                            console.error('Error calling updateHoroscope:', err);
                        }
                    }
                } else if (section === 'kundli') {
                    const kundliSection = document.getElementById('kundli-section');
                    const navKundli = document.getElementById('nav-kundli');
                    if (kundliSection) {
                        kundliSection.style.display = 'block';
                        kundliSection.classList.add('active');
                        sectionFound = true;
                        console.log('Kundli section shown');
                    } else {
                        console.error('Kundli section not found!');
                    }
                    if (navKundli) navKundli.classList.add('active');
                } else if (section === 'matchmaking') {
                    const matchmakingSection = document.getElementById('matchmaking-section');
                    const navMatchmaking = document.getElementById('nav-matchmaking');
                    if (matchmakingSection) {
                        matchmakingSection.style.display = 'block';
                        matchmakingSection.classList.add('active');
                        sectionFound = true;
                        console.log('Matchmaking section shown');
                    } else {
                        console.error('Matchmaking section not found!');
                    }
                    if (navMatchmaking) navMatchmaking.classList.add('active');
                } else if (section === 'tarot') {
                    const tarotSection = document.getElementById('tarot-section');
                    const navTarot = document.getElementById('nav-tarot');
                    if (tarotSection) {
                        tarotSection.style.display = 'block';
                        tarotSection.classList.add('active');
                        sectionFound = true;
                        console.log('Tarot section shown');
                    } else {
                        console.error('Tarot section not found!');
                    }
                    if (navTarot) navTarot.classList.add('active');
                } else if (section === 'numerology') {
                    const numerologySection = document.getElementById('numerology-section');
                    const navNumerology = document.getElementById('nav-numerology');
                    if (numerologySection) {
                        numerologySection.style.display = 'block';
                        numerologySection.classList.add('active');
                        sectionFound = true;
                        console.log('Numerology section shown');
                    } else {
                        console.error('Numerology section not found!');
                    }
                    if (navNumerology) navNumerology.classList.add('active');
                } else if (section === 'panchang') {
                    const panchangSection = document.getElementById('panchang-section');
                    const navPanchang = document.getElementById('nav-panchang');
                    if (panchangSection) {
                        panchangSection.style.display = 'block';
                        panchangSection.classList.add('active');
                        sectionFound = true;
                        console.log('Panchang section shown');
                        // Set today's date as default
                        const dateInput = document.getElementById('panchang-date');
                        if (dateInput && !dateInput.value) {
                            const today = new Date();
                            dateInput.value = today.toISOString().split('T')[0];
                        }
                    } else {
                        console.error('Panchang section not found!');
                    }
                    if (navPanchang) navPanchang.classList.add('active');
                } else if (section === 'gemstone') {
                    const gemstoneSection = document.getElementById('gemstone-section');
                    const navGemstone = document.getElementById('nav-gemstone');
                    if (gemstoneSection) {
                        gemstoneSection.style.display = 'block';
                        gemstoneSection.classList.add('active');
                        sectionFound = true;
                        console.log('Gemstone section shown');
                        // Set user's sign as default
                        const gemstoneSign = document.getElementById('gemstone-sign');
                        if (gemstoneSign && userSign) {
                            gemstoneSign.value = userSign;
                        }
                    } else {
                        console.error('Gemstone section not found!');
                    }
                    if (navGemstone) navGemstone.classList.add('active');
                } else if (section === 'vastu') {
                    const vastuSection = document.getElementById('vastu-section');
                    const navVastu = document.getElementById('nav-vastu');
                    if (vastuSection) {
                        vastuSection.style.display = 'block';
                        vastuSection.classList.add('active');
                        sectionFound = true;
                        console.log('Vastu section shown');
                    } else {
                        console.error('Vastu section not found!');
                    }
                    if (navVastu) navVastu.classList.add('active');
                } else if (section === 'history') {
                    const historySection = document.getElementById('history-section');
                    const navHistory = document.getElementById('nav-history');
                    if (historySection) {
                        historySection.style.display = 'block';
                        historySection.classList.add('active');
                        sectionFound = true;
                        console.log('History section shown');
                    } else {
                        console.error('History section not found!');
                    }
                    if (navHistory) navHistory.classList.add('active');
                    if (typeof displayHistory === 'function') {
                        try {
                            setTimeout(() => displayHistory(), 200);
                        } catch (err) {
                            console.error('Error calling displayHistory:', err);
                        }
                    }
                } else if (section === 'profile') {
                    const profileSection = document.getElementById('profile-section');
                    const navProfile = document.getElementById('nav-profile');
                    if (profileSection) {
                        profileSection.style.display = 'block';
                        profileSection.classList.add('active');
                        sectionFound = true;
                        console.log('Profile section shown');
                    } else {
                        console.error('Profile section not found!');
                    }
                    if (navProfile) navProfile.classList.add('active');
                    if (typeof loadProfile === 'function') {
                        try {
                            setTimeout(() => loadProfile(), 200);
                        } catch (err) {
                            console.error('Error calling loadProfile:', err);
                        }
                    }
                } else {
                    console.warn('Unknown section:', section);
                    alert('Section "' + section + '" not found. Please check the navigation menu.');
                    return;
                }
                
                if (!sectionFound) {
                    console.error('Section element not found for:', section);
                    alert('Error: Could not find the "' + section + '" section. Please refresh the page.');
                    return;
                }
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
                console.log('Navigation to', section, 'completed successfully');
            } catch (error) {
                console.error('Error in showSection:', error);
                alert('Error navigating to ' + section + '. Please refresh the page or check the console for details.');
            }
        }

        function showChat() {
            try {
                console.log('Opening chat section...');
                
                // Hide all sections
                const sections = document.querySelectorAll('.section');
                if (sections.length === 0) {
                    console.warn('No sections found to hide');
                }
                sections.forEach(s => {
                    if (s) s.style.display = 'none';
                });
                
                // Show chat section
                const chatSection = document.getElementById('chat-section');
                if (!chatSection) {
                    console.error('Chat section not found!');
                    alert('Chat section not found. Please refresh the page.');
                    return;
                }
                
                chatSection.style.display = 'block';
                chatSection.classList.add('active');
                console.log('Chat section displayed');
                
                // Update navigation
                const navLinks = document.querySelectorAll('.nav-links a');
                navLinks.forEach(a => {
                    if (a) a.classList.remove('active');
                });
                const navChat = document.getElementById('nav-chat');
                if (navChat) {
                    navChat.classList.add('active');
                    console.log('Nav chat link activated');
                } else {
                    console.warn('Nav chat link not found');
                }
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                // Add welcome message if chat is empty
                const messagesDiv = document.getElementById('messages');
                if (messagesDiv && messagesDiv.children.length === 0) {
                    if (typeof addMessage === 'function' && typeof t === 'function') {
                        addMessage(t('welcome'), false);
                    } else {
                        console.warn('addMessage or t function not available');
                    }
                }
                
                // Focus on input
                setTimeout(() => {
                    const userInput = document.getElementById('user-input');
                    if (userInput) {
                        userInput.focus();
                        console.log('Input focused');
                    } else {
                        console.warn('User input not found');
                    }
                }, 100);
                
                console.log('Chat section opened successfully');
            } catch (error) {
                console.error('Error in showChat:', error);
                alert('Error opening chat. Please try again or refresh the page.');
            }
        }

        function hideChat() {
            const chatSection = document.getElementById('chat-section');
            chatSection.style.display = 'none';
            chatSection.classList.remove('active');
            showSection('home');
        }

        function updateHoroscope() {
            const signInfo = getSignInfo(userSign);
            const currentYear = new Date().getFullYear();
            
            document.getElementById('daily-content').textContent = dailyReadings[currentLanguage][userSign] || dailyReadings.en[userSign];
            document.getElementById('weekly-content').textContent = currentLanguage === 'hi' 
                ? `‡§á‡§∏ ‡§∏‡§™‡•ç‡§§‡§æ‡§π, ${userSign}, ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°‡•Ä‡§Ø ‡§ä‡§∞‡•ç‡§ú‡§æ‡§è‡§Ç ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Ö‡§µ‡§∏‡§∞ ‡§≤‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§ó‡•ç‡§∞‡§π‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§§‡§æ‡§ï‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§ï‡•ç‡§∑ ‡§≤‡•á‡§§‡•Ä ‡§π‡•à‡•§`
                : `This week, ${userSign}, the cosmic energies bring significant opportunities for growth. The planetary alignments favor your natural strengths.`;
            document.getElementById('monthly-content').textContent = currentLanguage === 'hi'
                ? `‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á, ${userSign}, ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§î‡§∞ ‡§®‡§µ‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§µ‡§ß‡§ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï ‡§π‡•à‡•§ ‡§∏‡§ø‡§§‡§æ‡§∞‡•á ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§ø‡§Ç‡§¨ ‡§î‡§∞ ‡§Ü‡§ó‡•á ‡§ï‡•Ä ‡§ó‡§§‡§ø ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§`
                : `This month, ${userSign}, marks a period of transformation and renewal. The stars indicate a time of reflection and forward movement.`;
            
            // Yearly Horoscope
            const yearlyContent = currentLanguage === 'hi'
                ? `${currentYear} ‡§Æ‡•á‡§Ç, ${userSign}, ‡§Ø‡§π ‡§µ‡§∞‡•ç‡§∑ ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§î‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§ó‡§§‡§ø, ‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§ß‡§æ‡§∞, ‡§î‡§∞ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§ï‡•á ‡§Ö‡§µ‡§∏‡§∞ ‡§Æ‡§ø‡§≤‡•á‡§Ç‡§ó‡•á‡•§ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∞‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç‡•§`
                : `In ${currentYear}, ${userSign}, this year will bring significant growth and achievements. Opportunities for career advancement, relationship improvements, and personal development await. Focus on health and maintain positive energy throughout the year.`;
            
            const yearlyEl = document.getElementById('yearly-content');
            if (yearlyEl) yearlyEl.textContent = yearlyContent;
        }

        function addMessage(text, isUser) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            
            // Save to chat history for context
            if (isUser) {
                chatHistory.push({ role: 'user', content: text, timestamp: new Date().toISOString() });
            } else {
                chatHistory.push({ role: 'assistant', content: text, timestamp: new Date().toISOString() });
            }
            
            // Save reading to history
            if (!isUser) {
                saveToHistory('chat', { question: chatHistory[chatHistory.length - 2]?.content || '', answer: text, sign: userSign });
            }
        }
        
        // Reading History Functions
        function saveToHistory(type, data) {
            const reading = {
                id: Date.now().toString(),
                type: type,
                date: new Date().toISOString(),
                sign: userSign,
                data: data
            };
            readingHistory.unshift(reading);
            // Keep only last 100 readings
            if (readingHistory.length > 100) {
                readingHistory = readingHistory.slice(0, 100);
            }
            localStorage.setItem('reading-history', JSON.stringify(readingHistory));
        }
        
        function displayHistory(filterType = 'all') {
            const historyList = document.getElementById('history-list');
            const historyEmpty = document.getElementById('history-empty');
            if (!historyList || !historyEmpty) return;
            
            // Update filter buttons
            document.querySelectorAll('[id^="filter-"]').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-secondary');
            });
            const filterBtn = document.getElementById(`filter-${filterType}`);
            if (filterBtn) {
                filterBtn.classList.remove('btn-secondary');
                filterBtn.classList.add('btn-primary');
            }
            
            const filtered = filterType === 'all' 
                ? readingHistory 
                : readingHistory.filter(r => r.type === filterType);
            
            if (filtered.length === 0) {
                historyList.style.display = 'none';
                historyEmpty.style.display = 'block';
                return;
            }
            
            historyList.style.display = 'grid';
            historyEmpty.style.display = 'none';
            historyList.innerHTML = filtered.map(reading => {
                const date = new Date(reading.date);
                const dateStr = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                const signInfo = getSignInfo(reading.sign);
                
                let content = '';
                if (reading.type === 'chat') {
                    content = `<div><strong>Q:</strong> ${reading.data.question || 'N/A'}</div><div style="margin-top: 8px;"><strong>A:</strong> ${reading.data.answer.substring(0, 150)}${reading.data.answer.length > 150 ? '...' : ''}</div>`;
                } else {
                    content = `<div>${JSON.stringify(reading.data).substring(0, 200)}...</div>`;
                }
                
                return `
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                            <div>
                                <span style="font-size: 24px; margin-right: 8px;">${signInfo.symbol}</span>
                                <strong style="text-transform: capitalize;">${reading.type}</strong>
                            </div>
                            <span style="color: #666; font-size: 14px;">${dateStr}</span>
                        </div>
                        <div style="color: #666; line-height: 1.6;">${content}</div>
                        <button onclick="deleteReading('${reading.id}')" style="margin-top: 12px; padding: 6px 12px; background: #f0f0f0; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">Delete</button>
                    </div>
                `;
            }).join('');
        }
        
        function filterHistory(type) {
            displayHistory(type);
        }
        
        function deleteReading(id) {
            readingHistory = readingHistory.filter(r => r.id !== id);
            localStorage.setItem('reading-history', JSON.stringify(readingHistory));
            const currentFilter = document.querySelector('[id^="filter-"].btn-primary')?.id.replace('filter-', '') || 'all';
            displayHistory(currentFilter);
        }
        
        function clearHistory() {
            if (confirm('Are you sure you want to clear all reading history?')) {
                readingHistory = [];
                localStorage.setItem('reading-history', JSON.stringify([]));
                displayHistory('all');
            }
        }

        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase().trim();
            const isHindi = currentLanguage === 'hi';
            const signInfo = getSignInfo(userSign);
            
            // Use context from chat history for more personalized responses
            const recentContext = chatHistory.slice(-4); // Last 4 messages for context
            const hasAskedBefore = recentContext.some(msg => msg.role === 'user' && msg.content.toLowerCase().includes(lowerMessage.substring(0, 10)));
            
            // Check if user is asking follow-up questions
            const isFollowUp = recentContext.length > 0 && recentContext[recentContext.length - 1].role === 'assistant';

            // Greetings
            if (lowerMessage.match(/^(hi|hello|hey|greetings|good morning|good afternoon|good evening|‡§®‡§Æ‡§∏‡•ç‡§§‡•á|‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞|‡§π‡•à‡§≤‡•ã)$/)) {
                if (isHindi) {
                    return `‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ AI ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑‡•Ä ‡§π‡•Ç‡§Ç, ‡§î‡§∞ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°‡•Ä‡§Ø ‡§ä‡§∞‡•ç‡§ú‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Ç ‡§π‡•Ç‡§Ç‡•§ ${userSign} ‡§∞‡§æ‡§∂‡§ø ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§Ü‡§™ ${signInfo.ruler} ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∂‡§æ‡§∏‡§ø‡§§ ‡§π‡•à‡§Ç ‡§î‡§∞ ${signInfo.element} ‡§§‡§§‡•ç‡§µ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•á ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§ú‡§æ‡§®‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á?`;
                }
                return `Hello! I'm your AI Astrologer, and I'm here to guide you through the cosmic energies. As a ${userSign}, you're ruled by ${signInfo.ruler} and belong to the ${signInfo.element} element. What would you like to know about your horoscope?`;
            }

            // Kundali/Kundli Match/Matchmaking/Compatibility
            if (lowerMessage.match(/(kundali|kundli|match|matchmaking|compatibility|compatible|gun.*milan|‡§ó‡•Å‡§£.*‡§Æ‡§ø‡§≤‡§æ‡§®|‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä.*‡§Æ‡§ø‡§≤‡§æ‡§®|‡§Æ‡§ø‡§≤‡§æ‡§®|‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ|‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä|‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä.*‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ|‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä.*‡§Æ‡•à‡§ö|dikhani|dikhana)/)) {
                if (isHindi) {
                    return `‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Æ‡•Å‡§ù‡•á ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§®‡•ç‡§Æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è:\n\n‚Ä¢ ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø (‡§¶‡§ø‡§®, ‡§Æ‡§π‡•Ä‡§®‡§æ, ‡§µ‡§∞‡•ç‡§∑)\n‚Ä¢ ‡§ú‡§®‡•ç‡§Æ ‡§∏‡§Æ‡§Ø\n‚Ä¢ ‡§ú‡§®‡•ç‡§Æ ‡§∏‡•ç‡§•‡§æ‡§®\n\n${userSign} ‡§∞‡§æ‡§∂‡§ø ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ ${signInfo.element === 'Fire' ? '‡§µ‡§æ‡§Ø‡•Å ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç (Gemini, Libra, Aquarius) ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§Ö‡§ó‡•ç‡§®‡§ø ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•à' : signInfo.element === 'Earth' ? '‡§ú‡§≤ ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç (Cancer, Scorpio, Pisces) ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§™‡•É‡§•‡•ç‡§µ‡•Ä ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•à' : signInfo.element === 'Air' ? '‡§Ö‡§ó‡•ç‡§®‡§ø ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç (Aries, Leo, Sagittarius) ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§µ‡§æ‡§Ø‡•Å ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•à' : '‡§™‡•É‡§•‡•ç‡§µ‡•Ä ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç (Taurus, Virgo, Capricorn) ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ú‡§≤ ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•à'}‡•§\n\n‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§®‡•ç‡§Æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§Æ‡•à‡§Ç ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ‡•§`;
                }
                return `For kundali matching, I need birth details of both people:\n\n‚Ä¢ Birth date (day, month, year)\n‚Ä¢ Birth time\n‚Ä¢ Birth place\n\nAs a ${userSign}, your best compatibility is with ${signInfo.element === 'Fire' ? 'Air signs (Gemini, Libra, Aquarius) and other Fire signs' : signInfo.element === 'Earth' ? 'Water signs (Cancer, Scorpio, Pisces) and other Earth signs' : signInfo.element === 'Air' ? 'Fire signs (Aries, Leo, Sagittarius) and other Air signs' : 'Earth signs (Taurus, Virgo, Capricorn) and other Water signs'}.\n\nPlease provide birth details of both people, and I'll provide a detailed compatibility analysis.`;
            }

            // Daily Horoscope
            if (lowerMessage.match(/(daily|today|what.*today|horoscope.*today|reading.*today|‡§¶‡•à‡§®‡§ø‡§ï|‡§Ü‡§ú|‡§Ü‡§ú.*‡§ï‡•ç‡§Ø‡§æ|‡§∞‡§æ‡§∂‡§ø‡§´‡§≤.*‡§Ü‡§ú)/)) {
                return dailyReadings[currentLanguage][userSign] || dailyReadings.en[userSign];
            }

            // Weekly Horoscope
            if (lowerMessage.match(/(weekly|week|this week|what.*week|horoscope.*week|‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï|‡§∏‡§™‡•ç‡§§‡§æ‡§π|‡§á‡§∏.*‡§∏‡§™‡•ç‡§§‡§æ‡§π)/)) {
                if (isHindi) {
                    return `‡§á‡§∏ ‡§∏‡§™‡•ç‡§§‡§æ‡§π, ${userSign}, ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°‡•Ä‡§Ø ‡§ä‡§∞‡•ç‡§ú‡§æ‡§è‡§Ç ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Ö‡§µ‡§∏‡§∞ ‡§≤‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§ó‡•ç‡§∞‡§π‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§§‡§æ‡§ï‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§ï‡•ç‡§∑ ‡§≤‡•á‡§§‡•Ä ‡§π‡•à‡•§ ‡§â‡§® ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§ï‡•Ä ‡§â‡§Æ‡•ç‡§Æ‡•Ä‡§¶ ‡§ï‡§∞‡•á‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§¨‡§∏‡•á ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à‡§Ç‡•§ ‡§®‡§à ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ñ‡•Å‡§≤‡•á ‡§∞‡§π‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§ó‡•á ‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§™‡§∞ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡§æ ${signInfo.element} ‡§§‡§§‡•ç‡§µ ‡§á‡§∏ ‡§∏‡§™‡•ç‡§§‡§æ‡§π ‡§Ü‡§™‡§ï‡•ã ${signInfo.element === 'Fire' ? '‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§î‡§∞ ‡§™‡•ç‡§∞‡•á‡§∞‡§£‡§æ' : signInfo.element === 'Earth' ? '‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ ‡§î‡§∞ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§π‡§æ‡§∞‡§ø‡§ï‡§§‡§æ' : signInfo.element === 'Air' ? '‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§§‡§æ ‡§î‡§∞ ‡§∏‡§Ç‡§ö‡§æ‡§∞' : '‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ó‡§π‡§∞‡§æ‡§à ‡§î‡§∞ ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ú‡•ç‡§û‡§æ‡§®'} ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§ó‡§æ‡•§`;
                }
                return `This week, ${userSign}, the cosmic energies bring significant opportunities for growth. The planetary alignments favor your natural strengths. Expect positive changes in areas that matter most to you. Stay open to new possibilities and trust the journey ahead. Your ${signInfo.element} element will provide you with ${signInfo.element === 'Fire' ? 'extra energy and inspiration' : signInfo.element === 'Earth' ? 'stability and practicality' : signInfo.element === 'Air' ? 'mental clarity and communication' : 'emotional depth and intuition'} this week.`;
            }

            // Monthly Horoscope
            if (lowerMessage.match(/(monthly|month|this month|what.*month|horoscope.*month|‡§Æ‡§æ‡§∏‡§ø‡§ï|‡§Æ‡§π‡•Ä‡§®‡§æ|‡§á‡§∏.*‡§Æ‡§π‡•Ä‡§®‡•á)/)) {
                if (isHindi) {
                    return `‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á, ${userSign}, ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§î‡§∞ ‡§®‡§µ‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§µ‡§ß‡§ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï ‡§π‡•à‡•§ ‡§∏‡§ø‡§§‡§æ‡§∞‡•á ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§ø‡§Ç‡§¨ ‡§î‡§∞ ‡§Ü‡§ó‡•á ‡§ï‡•Ä ‡§ó‡§§‡§ø ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§ú‡•Ä‡§µ‡§® ‡§µ‡§ø‡§∑‡§Ø ‡§´‡•ã‡§ï‡§∏ ‡§Æ‡•á‡§Ç ‡§Ü‡§è‡§Ç‡§ó‡•á, ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§§‡§æ ‡§î‡§∞ ‡§¶‡§ø‡§∂‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§ ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§ï‡•ã ‡§Ö‡§™‡§®‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§≤‡§ö‡•Ä‡§≤‡•á ‡§∞‡§π‡•á‡§Ç‡•§ ${signInfo.ruler} ‡§ï‡•Ä ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á ‡§Ü‡§™‡§ï‡•á ‡§ú‡•Ä‡§µ‡§® ‡§Æ‡•á‡§Ç ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ ‡§®‡§ø‡§≠‡§æ‡§è‡§ó‡•Ä, ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∞‡•Ç‡§™ ‡§∏‡•á ${signInfo.traits[0]} ‡§î‡§∞ ${signInfo.traits[1]} ‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç‡•§`;
                }
                return `This month, ${userSign}, marks a period of transformation and renewal. The stars indicate a time of reflection and forward movement. Major life themes will come into focus, offering clarity and direction. Embrace change and remain flexible. The energy of ${signInfo.ruler} will play a significant role in your life this month, especially in areas of ${signInfo.traits[0]} and ${signInfo.traits[1]}.`;
            }

            // Career Questions
            if (lowerMessage.match(/(career|job|work|profession|occupation|business|money|finance|salary|income|what.*career|best.*job|suitable.*career|‡§ï‡§∞‡§ø‡§Ø‡§∞|‡§®‡•å‡§ï‡§∞‡•Ä|‡§ï‡§æ‡§Æ|‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø|‡§™‡•á‡§∂‡§æ|‡§µ‡§ø‡§§‡•ç‡§§|‡§µ‡•á‡§§‡§®)/)) {
                const careerAdvice = {
                    'Aries': isHindi ? '‡§Ü‡§™‡§ï‡•Ä ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡•Ä ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§ö‡§Æ‡§ï‡§§‡•Ä ‡§π‡•à‡•§ ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§î‡§∞ ‡§™‡§π‡§≤ ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Your leadership skills shine in competitive environments. Consider roles that allow independence and initiative.',
                    'Taurus': isHindi ? '‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ ‡§î‡§∞ ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à‡•§ ‡§µ‡§ø‡§§‡•ç‡§§, ‡§∞‡§ø‡§Ø‡§≤ ‡§è‡§∏‡•ç‡§ü‡•á‡§ü, ‡§Ø‡§æ ‡§ï‡§≤‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§π‡•à‡•§' : 'Stability and financial security matter to you. Careers in finance, real estate, or the arts suit your nature.',
                    'Gemini': isHindi ? '‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§Ü‡§™‡§ï‡•Ä ‡§§‡§æ‡§ï‡§§ ‡§π‡•à‡•§ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ, ‡§≤‡•á‡§ñ‡§®, ‡§∂‡§ø‡§ï‡•ç‡§∑‡§£, ‡§Ø‡§æ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Communication is your strength. Consider careers in media, writing, teaching, or sales.',
                    'Cancer': isHindi ? '‡§Ü‡§™‡§ï‡•Ä ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤ ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤, ‡§Ü‡§§‡§ø‡§•‡•ç‡§Ø, ‡§Ø‡§æ ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü ‡§π‡•à‡•§' : 'Your nurturing nature excels in caregiving, hospitality, or roles that help others.',
                    'Leo': isHindi ? '‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞, ‡§Æ‡§®‡•ã‡§∞‡§Ç‡§ú‡§®, ‡§Ø‡§æ ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§è‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§ö‡§Æ‡§ï‡§®‡•á ‡§î‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡§Ç‡•§' : 'Creative fields, entertainment, or leadership roles allow you to shine and inspire others.',
                    'Virgo': isHindi ? '‡§µ‡§ø‡§µ‡§∞‡§£ ‡§™‡§∞ ‡§Ü‡§™‡§ï‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ, ‡§Ö‡§®‡•Å‡§∏‡§Ç‡§ß‡§æ‡§®, ‡§Ø‡§æ ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§' : 'Your attention to detail makes you excel in healthcare, research, or technical fields.',
                    'Libra': isHindi ? '‡§Ü‡§™‡§ï‡•á ‡§ï‡•Ç‡§ü‡§®‡•Ä‡§§‡§ø‡§ï ‡§ï‡•å‡§∂‡§≤ ‡§ï‡§æ‡§®‡•Ç‡§®, ‡§°‡§ø‡§ú‡§æ‡§á‡§®, ‡§Ø‡§æ ‡§∏‡§Ç‡§§‡•Å‡§≤‡§® ‡§î‡§∞ ‡§®‡§ø‡§∑‡•ç‡§™‡§ï‡•ç‡§∑‡§§‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§µ‡§æ‡§≤‡•Ä ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï‡§¶‡§Æ ‡§∏‡§π‡•Ä ‡§π‡•à‡§Ç‡•§' : 'Your diplomatic skills are perfect for law, design, or roles requiring balance and fairness.',
                    'Scorpio': isHindi ? '‡§ó‡§π‡§∞‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§Ü‡§™‡§ï‡•á ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§π‡•à‡•§ ‡§Æ‡§®‡•ã‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®, ‡§ú‡§æ‡§Ç‡§ö, ‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§∏‡§Ç‡§ß‡§æ‡§® ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Deep analysis and transformation suit you. Consider psychology, investigation, or research.',
                    'Sagittarius': isHindi ? '‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ, ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ, ‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§∂‡§® ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§æ‡§π‡§∏‡§ø‡§ï ‡§î‡§∞ ‡§ú‡§ø‡§ú‡•ç‡§û‡§æ‡§∏‡•Å ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Ç‡§∞‡•á‡§ñ‡§ø‡§§ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Travel, education, or philosophy align with your adventurous and curious nature.',
                    'Capricorn': isHindi ? '‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø, ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®, ‡§Ø‡§æ ‡§™‡§æ‡§∞‡§Ç‡§™‡§∞‡§ø‡§ï ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ï‡§æ‡§Ç‡§ï‡•ç‡§∑‡•Ä ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§ø‡§§ ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§∏‡•á ‡§Æ‡•á‡§≤ ‡§ñ‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Business, management, or traditional careers match your ambitious and disciplined approach.',
                    'Aquarius': isHindi ? '‡§®‡§µ‡§æ‡§ö‡§æ‡§∞ ‡§î‡§∞ ‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§Ü‡§™‡§ï‡•Ä ‡§Ö‡§ó‡•ç‡§∞‡§ó‡§æ‡§Æ‡•Ä ‡§∏‡•ã‡§ö ‡§ï‡•á ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§π‡•à‡•§ ‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§Ø‡§æ ‡§Æ‡§æ‡§®‡§µ‡•Ä‡§Ø ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Innovation and technology suit your forward-thinking nature. Consider tech or humanitarian work.',
                    'Pisces': isHindi ? '‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ï‡§≤‡§æ, ‡§â‡§™‡§ö‡§æ‡§∞ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø, ‡§Ø‡§æ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡§ú ‡§î‡§∞ ‡§ï‡§∞‡•Å‡§£‡§æ‡§Æ‡§Ø ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Ç‡§∞‡•á‡§ñ‡§ø‡§§ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Creative arts, healing professions, or spiritual work align with your intuitive and compassionate nature.'
                };
                return careerAdvice[userSign] || (isHindi ? '‡§Ü‡§™‡§ï‡§æ ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§Ü‡§™‡§ï‡•Ä ‡§Ö‡§®‡•Ç‡§†‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ ‡§î‡§∞ ‡§ú‡•Å‡§®‡•Ç‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§ø‡§§ ‡§π‡•à‡•§' : 'Your career path is guided by your unique talents and passions.');
            }

            // Love and Relationship Questions
            if (lowerMessage.match(/(love|relationship|romance|dating|partner|marriage|boyfriend|girlfriend|spouse|crush|attraction|what.*love|how.*love|find.*love|‡§™‡•ç‡§∞‡•á‡§Æ|‡§∞‡§ø‡§∂‡•ç‡§§‡§æ|‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§∏|‡§°‡•á‡§ü‡§ø‡§Ç‡§ó|‡§∏‡§æ‡§•‡•Ä|‡§µ‡§ø‡§µ‡§æ‡§π|‡§™‡•ç‡§∞‡•á‡§Æ‡•Ä|‡§™‡•ç‡§∞‡•á‡§Æ‡§ø‡§ï‡§æ|‡§™‡§§‡§ø|‡§™‡§§‡•ç‡§®‡•Ä|‡§Ü‡§ï‡§∞‡•ç‡§∑‡§£)/)) {
                const loveAdvice = {
                    'Aries': isHindi ? '‡§ú‡•Å‡§®‡•Ç‡§® ‡§î‡§∞ ‡§â‡§§‡•ç‡§∏‡§æ‡§π ‡§Ü‡§™‡§ï‡•á ‡§™‡•ç‡§∞‡•á‡§Æ ‡§ú‡•Ä‡§µ‡§® ‡§ï‡•ã ‡§ö‡§≤‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§è‡§ï ‡§ê‡§∏‡•á ‡§∏‡§æ‡§•‡•Ä ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•Ä ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§∏‡•á ‡§Æ‡•á‡§≤ ‡§ñ‡§æ‡§§‡§æ ‡§π‡•ã‡•§' : 'Passion and excitement drive your love life. You seek a partner who matches your energy and independence.',
                    'Taurus': isHindi ? '‡§Ü‡§™ ‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ ‡§î‡§∞ ‡§ó‡§π‡§∞‡•á, ‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ï‡•ã ‡§Æ‡§π‡§§‡•ç‡§µ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§∏ ‡§î‡§∞ ‡§ï‡§æ‡§Æ‡•Å‡§ï‡§§‡§æ ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à‡§Ç‡•§' : 'You value stability and deep, lasting connections. Romance and sensuality are important to you.',
                    'Gemini': isHindi ? '‡§Ü‡§™‡§ï‡•ã ‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡•å‡§¶‡•ç‡§ß‡§ø‡§ï ‡§â‡§§‡•ç‡§§‡•á‡§ú‡§®‡§æ ‡§î‡§∞ ‡§µ‡§ø‡§µ‡§ø‡§ß‡§§‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§¶‡§ø‡§≤ ‡§ï‡•Ä ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§π‡•à‡•§' : 'You need intellectual stimulation and variety in relationships. Communication is key to your heart.',
                    'Cancer': isHindi ? '‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§™‡•ã‡§∑‡§£ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§ó‡§π‡§∞‡§æ‡§à ‡§∏‡•á ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§¶‡•á‡§§‡•á ‡§î‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Emotional security and nurturing connections are essential. You give and receive love deeply.',
                    'Leo': isHindi ? '‡§Ü‡§™ ‡§≠‡§µ‡•ç‡§Ø ‡§á‡§∂‡§æ‡§∞‡•ã‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡§∂‡§Ç‡§∏‡§æ ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§è‡§ï ‡§ê‡§∏‡•á ‡§∏‡§æ‡§•‡•Ä ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•Ä ‡§ó‡§∞‡•ç‡§Æ‡§ú‡•ã‡§∂‡•Ä ‡§î‡§∞ ‡§â‡§¶‡§æ‡§∞‡§§‡§æ ‡§ï‡•Ä ‡§∏‡§∞‡§æ‡§π‡§®‡§æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•ã‡•§' : 'You love grand gestures and being adored. You seek a partner who appreciates your warmth and generosity.',
                    'Virgo': isHindi ? '‡§Ü‡§™ ‡§∏‡•á‡§µ‡§æ ‡§ï‡•á ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§î‡§∞ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§ï‡§∞ ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§π‡§æ‡§∞‡§ø‡§ï ‡§Ö‡§≠‡§ø‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡§æ‡§Ø‡§®‡•á ‡§∞‡§ñ‡§§‡•Ä ‡§π‡•à‡•§' : 'You show love through acts of service and attention to detail. Practical expressions matter most.',
                    'Libra': isHindi ? '‡§∏‡§æ‡§Æ‡§Ç‡§ú‡§∏‡•ç‡§Ø ‡§î‡§∞ ‡§∏‡§æ‡§ù‡•á‡§¶‡§æ‡§∞‡•Ä ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•Ä‡§Ø ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§∏‡§≠‡•Ä ‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§§‡•Å‡§≤‡§® ‡§î‡§∞ ‡§®‡§ø‡§∑‡•ç‡§™‡§ï‡•ç‡§∑‡§§‡§æ ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Harmony and partnership are central. You seek balance and fairness in all relationships.',
                    'Scorpio': isHindi ? '‡§§‡•Ä‡§µ‡•ç‡§∞, ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡•á‡§Æ ‡§π‡•Ä ‡§µ‡§π ‡§π‡•à ‡§ú‡§ø‡§∏‡§ï‡•Ä ‡§Ü‡§™ ‡§§‡§≤‡§æ‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§ó‡§π‡§∞‡•á ‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§¨‡§Ç‡§ß‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡§Ç‡•§' : 'Intense, transformative love is what you seek. Deep emotional bonds are essential.',
                    'Sagittarius': isHindi ? '‡§™‡•ç‡§∞‡•á‡§Æ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§î‡§∞ ‡§∏‡§æ‡§π‡§∏‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§Ü‡§™‡§ï‡•ã ‡§Ü‡§ï‡§∞‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•ã ‡§è‡§ï ‡§ê‡§∏‡•á ‡§∏‡§æ‡§•‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•á ‡§ú‡•Ä‡§µ‡§® ‡§ï‡•á ‡§â‡§§‡•ç‡§∏‡§æ‡§π ‡§ï‡•ã ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•ã‡•§' : 'Freedom and adventure in love appeal to you. You need a partner who shares your zest for life.',
                    'Capricorn': isHindi ? '‡§Ü‡§™ ‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§ï‡•ã ‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ ‡§∏‡•á ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§¶‡•ç‡§ß‡§§‡§æ ‡§ï‡•ã ‡§Æ‡§π‡§§‡•ç‡§µ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ ‡§Ü‡§™‡§ï‡§æ ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§π‡•à‡•§' : 'You take relationships seriously and value commitment. Long-term stability is your goal.',
                    'Aquarius': isHindi ? '‡§Ü‡§™‡§ï‡•ã ‡§¨‡•å‡§¶‡•ç‡§ß‡§ø‡§ï ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§Ö‡§™‡§∞‡§Ç‡§™‡§∞‡§æ‡§ó‡§§ ‡§∞‡§ø‡§∂‡•ç‡§§‡•á ‡§Ü‡§™‡§ï‡•ã ‡§Ü‡§ï‡§∞‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'You need intellectual connection and freedom. Unconventional relationships may appeal to you.',
                    'Pisces': isHindi ? '‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§ü‡§ø‡§ï ‡§î‡§∞ ‡§Ü‡§¶‡§∞‡•ç‡§∂‡§µ‡§æ‡§¶‡•Ä, ‡§Ü‡§™ ‡§™‡•ç‡§∞‡•á‡§Æ ‡§Æ‡•á‡§Ç ‡§ó‡§π‡§∞‡•á ‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§î‡§∞ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Romantic and idealistic, you seek deep emotional and spiritual connections in love.'
                };
                return loveAdvice[userSign] || (isHindi ? '‡§™‡•ç‡§∞‡•á‡§Æ ‡§Ü‡§™‡§ï‡•ã ‡§§‡§¨ ‡§Æ‡§ø‡§≤‡§§‡§æ ‡§π‡•à ‡§ú‡§¨ ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•á ‡§Ü‡§™ ‡§∏‡•á ‡§∏‡§ö‡•ç‡§ö‡•á ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ñ‡•Å‡§≤‡•á ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Love finds you when you're true to yourself and open to connection.');
            }

            // Personality/Traits
            if (lowerMessage.match(/(personality|traits|characteristics|what.*like|who.*am|describe|nature|behavior|temperament|qualities|‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§§‡•ç‡§µ|‡§≤‡§ï‡•ç‡§∑‡§£|‡§ï‡•à‡§∏‡§æ|‡§ï‡•å‡§®.*‡§π‡•Ç‡§Ç)/)) {
                if (isHindi) {
                    return `${userSign} ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§Ü‡§™ ‡§è‡§ï ${signInfo.element} ‡§∞‡§æ‡§∂‡§ø ‡§π‡•à‡§Ç, ${signInfo.ruler} ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∂‡§æ‡§∏‡§ø‡§§, ‡§ú‡§ø‡§®‡§Æ‡•á‡§Ç ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡§Ç ${signInfo.traits.join(', ')}‡•§ ‡§Ü‡§™‡§ï‡§æ ${signInfo.element} ‡§§‡§§‡•ç‡§µ ‡§Ü‡§™‡§ï‡•ã ${signInfo.element === 'Fire' ? '‡§ú‡•Å‡§®‡•Ç‡§®‡•Ä, ‡§ä‡§∞‡•ç‡§ú‡§æ‡§µ‡§æ‡§® ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à-‡§â‡§®‡•ç‡§Æ‡•Å‡§ñ' : signInfo.element === 'Earth' ? '‡§µ‡•ç‡§Ø‡§æ‡§µ‡§π‡§æ‡§∞‡§ø‡§ï, ‡§ú‡§Æ‡•Ä‡§®‡•Ä ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø' : signInfo.element === 'Air' ? '‡§¨‡•å‡§¶‡•ç‡§ß‡§ø‡§ï, ‡§∏‡§Ç‡§ö‡§æ‡§∞‡•Ä ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï' : '‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï, ‡§∏‡§π‡§ú ‡§î‡§∞ ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤'} ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§`;
                }
                return `As a ${userSign}, you're a ${signInfo.element} sign, ruled by ${signInfo.ruler}, with key traits including ${signInfo.traits.join(', ')}. Your ${signInfo.element} element makes you ${signInfo.element === 'Fire' ? 'passionate, energetic, and action-oriented' : signInfo.element === 'Earth' ? 'practical, grounded, and reliable' : signInfo.element === 'Air' ? 'intellectual, communicative, and social' : 'emotional, intuitive, and sensitive'}.`;
            }

            // Element
            if (lowerMessage.match(/(element|fire|earth|air|water|what.*element|‡§§‡§§‡•ç‡§µ|‡§Ö‡§ó‡•ç‡§®‡§ø|‡§™‡•É‡§•‡•ç‡§µ‡•Ä|‡§µ‡§æ‡§Ø‡•Å|‡§ú‡§≤)/)) {
                const elementDesc = signInfo.element === 'Fire' 
                    ? (isHindi ? '‡§Ö‡§ó‡•ç‡§®‡§ø ‡§∞‡§æ‡§∂‡§ø‡§Ø‡§æ‡§Ç ‡§ú‡•Å‡§®‡•Ç‡§®‡•Ä, ‡§ä‡§∞‡•ç‡§ú‡§æ‡§µ‡§æ‡§® ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à-‡§â‡§®‡•ç‡§Æ‡•Å‡§ñ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§' : 'Fire signs are passionate, energetic, and action-oriented.')
                    : signInfo.element === 'Earth'
                    ? (isHindi ? '‡§™‡•É‡§•‡•ç‡§µ‡•Ä ‡§∞‡§æ‡§∂‡§ø‡§Ø‡§æ‡§Ç ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§π‡§æ‡§∞‡§ø‡§ï, ‡§ú‡§Æ‡•Ä‡§®‡•Ä ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§' : 'Earth signs are practical, grounded, and reliable.')
                    : signInfo.element === 'Air'
                    ? (isHindi ? '‡§µ‡§æ‡§Ø‡•Å ‡§∞‡§æ‡§∂‡§ø‡§Ø‡§æ‡§Ç ‡§¨‡•å‡§¶‡•ç‡§ß‡§ø‡§ï, ‡§∏‡§Ç‡§ö‡§æ‡§∞‡•Ä ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§' : 'Air signs are intellectual, communicative, and social.')
                    : (isHindi ? '‡§ú‡§≤ ‡§∞‡§æ‡§∂‡§ø‡§Ø‡§æ‡§Ç ‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï, ‡§∏‡§π‡§ú ‡§î‡§∞ ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§' : 'Water signs are emotional, intuitive, and sensitive.');
                return isHindi 
                    ? `${userSign} ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§Ü‡§™ ${signInfo.element} ‡§§‡§§‡•ç‡§µ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§π‡•à‡§Ç‡•§ ${elementDesc}`
                    : `As a ${userSign}, you belong to the ${signInfo.element} element. ${elementDesc}`;
            }

            // Ruler/Planet
            if (lowerMessage.match(/(ruler|planet|ruling|mars|venus|mercury|moon|sun|jupiter|saturn|uranus|neptune|pluto|‡§∂‡§æ‡§∏‡§ï|‡§ó‡•ç‡§∞‡§π|‡§Æ‡§Ç‡§ó‡§≤|‡§∂‡•Å‡§ï‡•ç‡§∞|‡§¨‡•Å‡§ß|‡§ö‡§Ç‡§¶‡•ç‡§∞‡§Æ‡§æ|‡§∏‡•Ç‡§∞‡•ç‡§Ø|‡§¨‡•É‡§π‡§∏‡•ç‡§™‡§§‡§ø|‡§∂‡§®‡§ø)/)) {
                const rulerDesc = signInfo.ruler.includes('Mars') 
                    ? (isHindi ? '‡§Æ‡§Ç‡§ó‡§≤ ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§æ‡§π‡§∏, ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§î‡§∞ ‡§¶‡•É‡§¢‡§º‡§§‡§æ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à-‡§â‡§®‡•ç‡§Æ‡•Å‡§ñ ‡§î‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡•Ä ‡§π‡•à‡§Ç‡•§' : 'Mars brings you courage, energy, and assertiveness. You\'re action-oriented and competitive.')
                    : signInfo.ruler.includes('Venus')
                    ? (isHindi ? '‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•Å‡§Ç‡§¶‡§∞‡§§‡§æ, ‡§∏‡§æ‡§Æ‡§Ç‡§ú‡§∏‡•ç‡§Ø ‡§î‡§∞ ‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§ï‡§≤‡§æ ‡§ï‡•Ä ‡§∏‡§∞‡§æ‡§π‡§®‡§æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§∏‡§æ‡§ù‡•á‡§¶‡§æ‡§∞‡•Ä ‡§ï‡•ã ‡§Æ‡§π‡§§‡•ç‡§µ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Venus brings you love of beauty, harmony, and relationships. You appreciate art and value partnerships.')
                    : signInfo.ruler.includes('Mercury')
                    ? (isHindi ? '‡§¨‡•Å‡§ß ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§ï‡•å‡§∂‡§≤, ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§®‡§∂‡•Ä‡§≤‡§§‡§æ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§§‡•á‡§ú-‡§§‡§∞‡•ç‡§∞‡§æ‡§∞ ‡§î‡§∞ ‡§ú‡§ø‡§ú‡•ç‡§û‡§æ‡§∏‡•Å ‡§π‡•à‡§Ç‡•§' : 'Mercury brings you communication skills, intellect, and adaptability. You\'re quick-witted and curious.')
                    : signInfo.ruler.includes('Moon')
                    ? (isHindi ? '‡§ö‡§Ç‡§¶‡•ç‡§∞‡§Æ‡§æ ‡§Ü‡§™‡§ï‡•ã ‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ó‡§π‡§∞‡§æ‡§à, ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§™‡•ã‡§∑‡§£ ‡§ó‡•Å‡§£ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§Æ‡•Ç‡§° ‡§î‡§∞ ‡§ö‡§ï‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§™‡•ç‡§∞‡§§‡§ø ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§π‡•à‡§Ç‡•§' : 'The Moon brings you emotional depth, intuition, and nurturing qualities. You\'re sensitive to moods and cycles.')
                    : signInfo.ruler.includes('Sun')
                    ? (isHindi ? '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§Ü‡§™‡§ï‡•ã ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏, ‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï‡§§‡§æ ‡§î‡§∞ ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§∏‡•ç‡§µ‡§æ‡§≠‡§æ‡§µ‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ö‡§Æ‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'The Sun brings you confidence, creativity, and leadership. You naturally shine and inspire others.')
                    : signInfo.ruler.includes('Jupiter')
                    ? (isHindi ? '‡§¨‡•É‡§π‡§∏‡•ç‡§™‡§§‡§ø ‡§Ü‡§™‡§ï‡•ã ‡§Ü‡§∂‡§æ‡§µ‡§æ‡§¶, ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§î‡§∞ ‡§ú‡•ç‡§û‡§æ‡§® ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§î‡§∞ ‡§Ö‡§∞‡•ç‡§• ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Jupiter brings you optimism, expansion, and wisdom. You seek growth and meaning.')
                    : signInfo.ruler.includes('Saturn')
                    ? (isHindi ? '‡§∂‡§®‡§ø ‡§Ü‡§™‡§ï‡•ã ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§®, ‡§∏‡§Ç‡§∞‡§ö‡§®‡§æ ‡§î‡§∞ ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§ï‡§°‡§º‡•Ä ‡§Æ‡•á‡§π‡§®‡§§ ‡§î‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§ø ‡§ï‡•ã ‡§Æ‡§π‡§§‡•ç‡§µ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Saturn brings you discipline, structure, and responsibility. You value hard work and achievement.')
                    : (isHindi ? '‡§Ø‡§π ‡§ó‡•ç‡§∞‡§π‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ ‡§Ü‡§™‡§ï‡•á ‡§Æ‡•Ç‡§≤ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§§‡•ç‡§µ ‡§î‡§∞ ‡§ú‡•Ä‡§µ‡§® ‡§™‡§• ‡§ï‡•ã ‡§Ü‡§ï‡§æ‡§∞ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§' : 'This planetary influence shapes your core personality and life path.');
                return isHindi
                    ? `‡§Ü‡§™‡§ï‡•Ä ‡§∞‡§æ‡§∂‡§ø, ${userSign}, ${signInfo.ruler} ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∂‡§æ‡§∏‡§ø‡§§ ‡§π‡•à‡•§ ${rulerDesc}`
                    : `Your sign, ${userSign}, is ruled by ${signInfo.ruler}. ${rulerDesc}`;
            }

            // Help
            if (lowerMessage.match(/(help|what.*can|what.*do|how.*help|assist|guide|support|options|available|‡§Æ‡§¶‡§¶|‡§ï‡•ç‡§Ø‡§æ.*‡§ï‡§∞.*‡§∏‡§ï‡§§‡•á|‡§ï‡•à‡§∏‡•á.*‡§Æ‡§¶‡§¶)/)) {
                if (isHindi) {
                    return `‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Ç ‡§π‡•Ç‡§Ç, ${userSign}! ‡§Æ‡•à‡§Ç ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç:\n\n‚Ä¢ ‡§¶‡•à‡§®‡§ø‡§ï, ‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§î‡§∞ ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤\n‚Ä¢ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£\n‚Ä¢ ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®\n‚Ä¢ ‡§™‡•ç‡§∞‡•á‡§Æ ‡§î‡§∞ ‡§∞‡§ø‡§∂‡•ç‡§§‡•á ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π\n‚Ä¢ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§§‡•ç‡§µ ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä\n‚Ä¢ ‡§§‡§§‡•ç‡§µ ‡§î‡§∞ ‡§∂‡§æ‡§∏‡§ï ‡§ó‡•ç‡§∞‡§π ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§¶‡•É‡§∑‡•ç‡§ü‡§ø\n‚Ä¢ ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§∞\n\n‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§ñ‡•ã‡§ú‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á?`;
                }
                return `I'm here to help you, ${userSign}! I can provide:\n\n‚Ä¢ Daily, weekly, and monthly horoscopes\n‚Ä¢ Kundali matching and compatibility analysis\n‚Ä¢ Career guidance\n‚Ä¢ Love and relationship advice\n‚Ä¢ Information about personality traits\n‚Ä¢ Insights about your element and ruling planet\n‚Ä¢ Answers to astrology questions\n\nWhat would you like to explore?`;
            }

            // Thank you
            if (lowerMessage.match(/(thank|thanks|appreciate|grateful|‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶|‡§∂‡•Å‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ|‡§Ü‡§≠‡§æ‡§∞)/)) {
                return isHindi
                    ? `‡§Ü‡§™‡§ï‡§æ ‡§¨‡§π‡•Å‡§§-‡§¨‡§π‡•Å‡§§ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à, ${userSign}! ‡§Æ‡•Å‡§ù‡•á ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°‡•Ä‡§Ø ‡§ä‡§∞‡•ç‡§ú‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Ü‡§™‡§ï‡§æ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§π‡•à‡•§ ‚ú®`
                    : `You're very welcome, ${userSign}! I'm honored to guide you through the cosmic energies. ‚ú®`;
            }

            // Context-aware follow-up responses
            if (isFollowUp && recentContext.length > 0) {
                const lastResponse = recentContext[recentContext.length - 1].content.toLowerCase();
                if (lastResponse.includes('kundali') || lastResponse.includes('compatibility') || lastResponse.includes('‡§Æ‡§ø‡§≤‡§æ‡§®')) {
                    if (isHindi) {
                        return `‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ "Matchmaking" ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§®‡•ç‡§Æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§ó‡•Å‡§£ ‡§Æ‡§ø‡§≤‡§æ‡§®, ‡§§‡§§‡•ç‡§µ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ, ‡§î‡§∞ ‡§ó‡•ç‡§∞‡§π‡•Ä‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡§æ‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç‡§ó‡•Ä‡•§`;
                    }
                    return `I can help you with kundali matching. Please go to the "Matchmaking" section and enter birth details for both people. I'll provide you with a detailed compatibility report including guna milan, element compatibility, and planetary positions.`;
                }
                if (lastResponse.includes('birth chart') || lastResponse.includes('kundli') || lastResponse.includes('‡§ú‡§®‡•ç‡§Æ')) {
                    if (isHindi) {
                        return `‡§ú‡§®‡•ç‡§Æ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§ï‡•É‡§™‡§Ø‡§æ "Kundli" ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø, ‡§∏‡§Æ‡§Ø ‡§î‡§∞ ‡§∏‡•ç‡§•‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ú‡§®‡•ç‡§Æ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§∏‡§≠‡•Ä ‡§ó‡•ç‡§∞‡§π‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø, ‡§ò‡§∞, ‡§î‡§∞ ‡§ó‡•ç‡§∞‡§π‡•Ä‡§Ø ‡§™‡§π‡§≤‡•Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç‡§ó‡•á‡•§`;
                    }
                    return `To generate your birth chart, please go to the "Kundli" section and enter your birth date, time, and place. I'll generate your complete birth chart with all planetary positions, houses, and aspects.`;
                }
            }
            
            // Default response with more helpful suggestions
            return isHindi
                ? `‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Ç ‡§ï‡§ø ‡§Ü‡§™ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ö‡§æ‡§π ‡§∞‡§π‡•á ‡§π‡•à‡§Ç, ${userSign}‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç:\n\n‚Ä¢ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ (Matchmaking ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç)\n‚Ä¢ ‡§ú‡§®‡•ç‡§Æ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä (Kundli ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç)\n‚Ä¢ ‡§¶‡•à‡§®‡§ø‡§ï/‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï/‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§∞‡§æ‡§∂‡§ø‡§´‡§≤\n‚Ä¢ ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®\n‚Ä¢ ‡§™‡•ç‡§∞‡•á‡§Æ ‡§î‡§∞ ‡§∞‡§ø‡§∂‡•ç‡§§‡•á ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π\n‚Ä¢ ‡§§‡§æ‡§∞‡•ã ‡§∞‡•Ä‡§°‡§ø‡§Ç‡§ó (Tarot ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç)\n‚Ä¢ ‡§Ö‡§Ç‡§ï ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ (Numerology ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç)\n‚Ä¢ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§§‡•ç‡§µ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§î‡§∞ ‡§§‡§§‡•ç‡§µ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä\n\n‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡•Ç‡§õ‡•á‡§Ç ‡§Ø‡§æ ‡§ä‡§™‡§∞ ‡§¶‡§ø‡§è ‡§ó‡§è ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç‡•§`
                : `I understand you're seeking guidance, ${userSign}. I can help you with:\n\n‚Ä¢ Kundali matching and compatibility (Go to Matchmaking section)\n‚Ä¢ Birth chart generation (Go to Kundli section)\n‚Ä¢ Daily/weekly/monthly horoscopes\n‚Ä¢ Career guidance\n‚Ä¢ Love and relationship advice\n‚Ä¢ Tarot reading (Go to Tarot section)\n‚Ä¢ Numerology (Go to Numerology section)\n‚Ä¢ Personality traits and element information\n\nPlease ask your question more specifically or visit the sections above.`;
        }

        function sendQuickQuestion(question) {
            const input = document.getElementById('user-input');
            if (input) {
                input.value = question;
                sendMessage();
            }
        }
        
        function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            if (!message) return;

            addMessage(message, true);
            input.value = '';
            document.getElementById('send-btn').disabled = true;

            setTimeout(() => {
                try {
                    const response = generateAIResponse(message);
                    addMessage(response, false);
                } catch (error) {
                    addMessage(t('error'), false);
                } finally {
                    document.getElementById('send-btn').disabled = false;
                }
            }, 500);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        document.addEventListener('click', (e) => {
            try {
                const menu = document.getElementById('sign-menu');
                const btn = document.getElementById('sign-btn');
                if (menu && btn && !menu.contains(e.target) && !btn.contains(e.target)) {
                    menu.classList.remove('show');
                }
            } catch (error) {
                // Silently handle errors
            }
        });

        // Birth Chart Generator
        function generateKundli() {
            try {
                const date = document.getElementById('kundli-date').value;
                const time = document.getElementById('kundli-time').value;
                const place = document.getElementById('kundli-place').value;
                
                // Log the action
                saveActivityLog('button_click', 'kundli', {
                    action: 'generate_kundli',
                    date: date,
                    time: time,
                    place: place
                });
                
                if (!date) {
                    alert(currentLanguage === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç' : 'Please enter birth date');
                    return;
                }
                
                // Show loading
                const resultDiv = document.getElementById('kundli-result');
                if (resultDiv) {
                    resultDiv.style.display = 'block';
                    document.getElementById('kundli-content').innerHTML = '<div class="loading"></div> ' + (currentLanguage === 'hi' ? '‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...' : 'Generating birth chart...');
                }
                
                const birthDate = new Date(date + (time ? 'T' + time : ''));
                const calculatedSign = calculateZodiacSign(birthDate);
                const signInfo = getSignInfo(calculatedSign);
                
                // Small delay for better UX
                setTimeout(() => {
                    // Calculate Dasha periods (simplified Vimshottari Dasha)
                    const dashas = ['Ketu', 'Venus', 'Sun', 'Moon', 'Mars', 'Rahu', 'Jupiter', 'Saturn', 'Mercury'];
                    const birthYear = birthDate.getFullYear();
                    const dashaIndex = (birthYear % 9);
                    const currentDasha = dashas[dashaIndex];
                    const nextDasha = dashas[(dashaIndex + 1) % 9];
                    
                    // House positions (simplified)
                    const houses = {
                        1: 'Ascendant (Lagna)',
                        2: 'Wealth & Family',
                        3: 'Siblings & Communication',
                        4: 'Home & Mother',
                        5: 'Children & Education',
                        6: 'Health & Enemies',
                        7: 'Marriage & Partnership',
                        8: 'Longevity & Transformation',
                        9: 'Fortune & Father',
                        10: 'Career & Status',
                        11: 'Gains & Friends',
                        12: 'Losses & Spirituality'
                    };
                    
                    const result = `
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 16px; padding: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white;">
                                <div style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">${signInfo.symbol} ${calculatedSign}</div>
                                <div style="opacity: 0.9;">Complete Birth Chart Analysis</div>
                            </div>
                            <div style="margin-bottom: 16px;">
                                <strong style="color: #667eea; font-size: 18px;">Birth Details:</strong><br>
                                Date: ${birthDate.toLocaleDateString()}<br>
                                ${time ? 'Time: ' + time + '<br>' : ''}
                                ${place ? 'Place: ' + place + '<br>' : ''}
                            </div>
                            <div style="margin-bottom: 16px; padding: 16px; background: #f8f9fa; border-radius: 12px;">
                                <strong style="color: #667eea; font-size: 18px;">Zodiac Sign Information:</strong><br>
                                <strong>Element:</strong> ${signInfo.element}<br>
                                <strong>Ruling Planet:</strong> ${signInfo.ruler}<br>
                                <strong>Key Traits:</strong> ${signInfo.traits.join(', ')}
                            </div>
                            <div style="margin-bottom: 16px; padding: 16px; background: #f8f9fa; border-radius: 12px;">
                                <strong style="color: #667eea; font-size: 18px;">Planetary Positions:</strong><br>
                                Sun: ${calculatedSign}<br>
                                Moon: ${getMoonSign(calculatedSign)}<br>
                                Ascendant: ${getAscendant(calculatedSign)}<br>
                                Mars: ${getMarsSign(calculatedSign)}<br>
                                Venus: ${getVenusSign(calculatedSign)}<br>
                                Mercury: ${getMercurySign(calculatedSign)}<br>
                                Jupiter: ${getJupiterSign(calculatedSign)}<br>
                                Saturn: ${getSaturnSign(calculatedSign)}
                            </div>
                            <div style="margin-bottom: 16px; padding: 16px; background: #e8f5e9; border-radius: 12px;">
                                <strong style="color: #2e7d32; font-size: 18px;">Current Dasha Period:</strong><br>
                                <div style="font-size: 20px; font-weight: 600; color: #2e7d32; margin-top: 8px;">${currentDasha} Dasha</div>
                                <div style="margin-top: 8px; color: #666;">You are currently under the influence of ${currentDasha} Dasha. Next major period will be ${nextDasha} Dasha.</div>
                            </div>
                            <div style="margin-bottom: 16px; padding: 16px; background: #fff3e0; border-radius: 12px;">
                                <strong style="color: #e65100; font-size: 18px;">House Positions:</strong><br>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px; margin-top: 8px;">
                                    ${Object.entries(houses).slice(0, 6).map(([num, name]) => `<div>House ${num}: ${name}</div>`).join('')}
                                </div>
                            </div>
                            <div style="margin-top: 20px; padding-top: 16px; border-top: 2px solid #e0e0e0; display: flex; gap: 12px; flex-wrap: wrap;">
                                <button onclick="navigateTo('matchmaking')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üíë Check Compatibility</button>
                                <button onclick="navigateTo('horoscope')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üìÖ View Horoscope</button>
                                <button onclick="navigateTo('chat')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üí¨ Ask Questions</button>
                                <button onclick="exportKundli()" class="btn btn-primary" style="font-size: 12px; padding: 8px 16px;">üìÑ Export PDF</button>
                                <button onclick="printKundli()" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üñ®Ô∏è Print</button>
                            </div>
                        </div>
                    `;
                    
                    document.getElementById('kundli-content').innerHTML = result;
                    saveToHistory('kundli', { date, time, place, sign: calculatedSign, chart: result, dasha: currentDasha });
                }, 500);
            } catch (error) {
                console.error('Error generating kundli:', error);
                alert(currentLanguage === 'hi' ? '‡§ú‡§®‡•ç‡§Æ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§á‡§®‡§™‡•Å‡§ü ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§' : 'Error generating birth chart. Please check your inputs.');
            }
        }
        
        // Export Kundli to PDF (simplified - opens print dialog)
        function exportKundli() {
            try {
                const kundliContent = document.getElementById('kundli-content');
                if (!kundliContent) {
                    alert(currentLanguage === 'hi' ? '‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä' : 'Kundli content not found');
                    return;
                }
                
                // Create a new window with the content
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                        <head>
                            <title>Birth Chart - ${userSign}</title>
                            <style>
                                body { font-family: Arial, sans-serif; padding: 20px; }
                                h1 { color: #667eea; }
                                .section { margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; }
                            </style>
                        </head>
                        <body>
                            <h1>Birth Chart Report</h1>
                            ${kundliContent.innerHTML}
                        </body>
                    </html>
                `);
                printWindow.document.close();
                setTimeout(() => {
                    printWindow.print();
                }, 250);
            } catch (error) {
                console.error('Error exporting kundli:', error);
                alert(currentLanguage === 'hi' ? '‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø' : 'Error exporting');
            }
        }
        
        // Print Kundli
        function printKundli() {
            try {
                exportKundli();
            } catch (error) {
                console.error('Error printing kundli:', error);
            }
        }
        
        function calculateZodiacSign(date) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return 'Aries';
            if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return 'Taurus';
            if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) return 'Gemini';
            if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) return 'Cancer';
            if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return 'Leo';
            if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return 'Virgo';
            if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) return 'Libra';
            if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) return 'Scorpio';
            if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) return 'Sagittarius';
            if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return 'Capricorn';
            if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return 'Aquarius';
            if ((month === 2 && day >= 19) || (month === 3 && day <= 20)) return 'Pisces';
            return 'Aries';
        }
        
        function getMoonSign(sunSign) {
            const signs = ['Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini'];
            const index = Object.keys(zodiacSigns).indexOf(sunSign);
            return signs[index % 12];
        }
        
        function getAscendant(sunSign) {
            const ascendants = ['Libra', 'Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo'];
            const index = Object.keys(zodiacSigns).indexOf(sunSign);
            return ascendants[index % 12];
        }
        
        function getMarsSign(sunSign) {
            const marsSigns = ['Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra'];
            const index = Object.keys(zodiacSigns).indexOf(sunSign);
            return marsSigns[index % 12];
        }
        
        function getVenusSign(sunSign) {
            const venusSigns = ['Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces', 'Aries'];
            const index = Object.keys(zodiacSigns).indexOf(sunSign);
            return venusSigns[index % 12];
        }
        
        function getMercurySign(sunSign) {
            const mercurySigns = ['Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus'];
            const index = Object.keys(zodiacSigns).indexOf(sunSign);
            return mercurySigns[index % 12];
        }
        
        function getJupiterSign(sunSign) {
            const jupiterSigns = ['Sagittarius', 'Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio'];
            const index = Object.keys(zodiacSigns).indexOf(sunSign);
            return jupiterSigns[index % 12];
        }
        
        function getSaturnSign(sunSign) {
            const saturnSigns = ['Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio', 'Sagittarius'];
            const index = Object.keys(zodiacSigns).indexOf(sunSign);
            return saturnSigns[index % 12];
        }
        
        // Compatibility Calculator
        function calculateCompatibility() {
            try {
                const sign1 = document.getElementById('person1-sign').value;
                const sign2 = document.getElementById('person2-sign').value;
                const date1 = document.getElementById('person1-date').value;
                const date2 = document.getElementById('person2-date').value;
                
                // Log the action
                saveActivityLog('button_click', 'matchmaking', {
                    action: 'calculate_compatibility',
                    sign1: sign1,
                    sign2: sign2,
                    date1: date1,
                    date2: date2
                });
                
                if (!sign1 || !sign2) {
                    alert(currentLanguage === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∞‡§æ‡§∂‡§ø ‡§ö‡§ø‡§®‡•ç‡§π ‡§ö‡•Å‡§®‡•á‡§Ç' : 'Please select zodiac signs for both people');
                    return;
                }
                
                // Show loading
                const resultDiv = document.getElementById('compatibility-result');
                if (resultDiv) {
                    resultDiv.style.display = 'block';
                    document.getElementById('compatibility-content').innerHTML = '<div class="loading"></div> ' + (currentLanguage === 'hi' ? '‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...' : 'Calculating compatibility...');
                }
                
                const signInfo1 = getSignInfo(sign1);
                const signInfo2 = getSignInfo(sign2);
                
                // Calculate compatibility score
                let score = 50; // Base score
                
                // Element compatibility
                if (signInfo1.element === signInfo2.element) score += 20;
                else if (
                    (signInfo1.element === 'Fire' && signInfo2.element === 'Air') ||
                    (signInfo1.element === 'Air' && signInfo2.element === 'Fire') ||
                    (signInfo1.element === 'Earth' && signInfo2.element === 'Water') ||
                    (signInfo1.element === 'Water' && signInfo2.element === 'Earth')
                ) score += 15;
                
                // Modality compatibility (simplified)
                const modalities = {
                    'Aries': 'Cardinal', 'Cancer': 'Cardinal', 'Libra': 'Cardinal', 'Capricorn': 'Cardinal',
                    'Taurus': 'Fixed', 'Leo': 'Fixed', 'Scorpio': 'Fixed', 'Aquarius': 'Fixed',
                    'Gemini': 'Mutable', 'Virgo': 'Mutable', 'Sagittarius': 'Mutable', 'Pisces': 'Mutable'
                };
                
                if (modalities[sign1] === modalities[sign2]) score += 10;
                
                // Specific sign compatibility
                const compatiblePairs = {
                    'Aries': ['Leo', 'Sagittarius', 'Gemini', 'Aquarius'],
                    'Taurus': ['Virgo', 'Capricorn', 'Cancer', 'Pisces'],
                    'Gemini': ['Libra', 'Aquarius', 'Aries', 'Leo'],
                    'Cancer': ['Scorpio', 'Pisces', 'Taurus', 'Virgo'],
                    'Leo': ['Sagittarius', 'Aries', 'Gemini', 'Libra'],
                    'Virgo': ['Capricorn', 'Taurus', 'Cancer', 'Scorpio'],
                    'Libra': ['Aquarius', 'Gemini', 'Leo', 'Sagittarius'],
                    'Scorpio': ['Pisces', 'Cancer', 'Virgo', 'Capricorn'],
                    'Sagittarius': ['Aries', 'Leo', 'Libra', 'Aquarius'],
                    'Capricorn': ['Taurus', 'Virgo', 'Scorpio', 'Pisces'],
                    'Aquarius': ['Gemini', 'Libra', 'Aries', 'Sagittarius'],
                    'Pisces': ['Cancer', 'Scorpio', 'Taurus', 'Capricorn']
                };
                
                if (compatiblePairs[sign1]?.includes(sign2)) score += 15;
                
                score = Math.min(100, Math.max(0, score));
                
                const compatibilityLevel = score >= 80 ? 'Excellent' : score >= 60 ? 'Good' : score >= 40 ? 'Moderate' : 'Challenging';
                const compatibilityColor = score >= 80 ? '#4CAF50' : score >= 60 ? '#8BC34A' : score >= 40 ? '#FFC107' : '#FF9800';
                
                const result = `
                    <div style="line-height: 1.8;">
                        <div style="text-align: center; margin-bottom: 24px;">
                            <div style="font-size: 48px; font-weight: 700; color: ${compatibilityColor}; margin-bottom: 8px;">${score}%</div>
                            <div style="font-size: 20px; color: #667eea; font-weight: 600;">${compatibilityLevel} Match</div>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <strong>${signInfo1.symbol} ${sign1} & ${signInfo2.symbol} ${sign2}</strong>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <strong>Element Compatibility:</strong><br>
                            ${sign1} (${signInfo1.element}) & ${sign2} (${signInfo2.element})<br>
                            ${signInfo1.element === signInfo2.element ? 'Same element - Strong connection' : 
                              (signInfo1.element === 'Fire' && signInfo2.element === 'Air') || (signInfo1.element === 'Air' && signInfo2.element === 'Fire') ? 'Fire & Air - Complementary energies' :
                              (signInfo1.element === 'Earth' && signInfo2.element === 'Water') || (signInfo1.element === 'Water' && signInfo2.element === 'Earth') ? 'Earth & Water - Nurturing connection' :
                              'Different elements - May require understanding'}
                        </div>
                        <div style="margin-top: 20px; padding-top: 16px; border-top: 2px solid #e0e0e0; display: flex; gap: 12px; flex-wrap: wrap;">
                            <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üîÆ Generate Birth Charts</button>
                            <button onclick="navigateTo('chat')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üí¨ Ask More Questions</button>
                            <button onclick="navigateTo('horoscope')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üìÖ View Horoscopes</button>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <strong>Compatibility Analysis:</strong><br>
                            ${score >= 80 ? 'These signs have excellent compatibility. They complement each other well and can build a strong, harmonious relationship.' :
                              score >= 60 ? 'These signs have good compatibility. With understanding and effort, they can create a fulfilling partnership.' :
                              score >= 40 ? 'These signs have moderate compatibility. They may need to work on understanding each other\'s differences.' :
                              'These signs may face challenges. However, with patience and mutual respect, they can still build a meaningful connection.'}
                        </div>
                        </div>
                    </div>
                `;
                
                    document.getElementById('compatibility-content').innerHTML = result;
                    
                    saveToHistory('compatibility', { sign1, sign2, score, level: compatibilityLevel, gunaMilan: gunaScore, manglik: manglikStatus });
                }, 500);
            } catch (error) {
                console.error('Error calculating compatibility:', error);
                alert(currentLanguage === 'hi' ? '‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§§‡§æ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§á‡§®‡§™‡•Å‡§ü ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§' : 'Error calculating compatibility. Please check your inputs.');
            }
        }
        
        // Numerology Calculator
        function calculateNumerology() {
            try {
                const birthdate = document.getElementById('numerology-birthdate').value;
                const name = document.getElementById('numerology-name').value.trim();
                
                // Log the action
                saveActivityLog('button_click', 'numerology', {
                    action: 'calculate_numerology',
                    birthdate: birthdate,
                    name: name ? name.substring(0, 20) : '' // Only log first 20 chars of name for privacy
                });
                
                if (!birthdate) {
                    alert(currentLanguage === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç' : 'Please enter your birth date');
                    return;
                }
                
                // Show loading
                const resultDiv = document.getElementById('numerology-result');
                if (resultDiv) {
                    resultDiv.style.display = 'block';
                    document.getElementById('numerology-content').innerHTML = '<div class="loading"></div> ' + (currentLanguage === 'hi' ? '‡§Ö‡§Ç‡§ï ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...' : 'Calculating numerology...');
                }
                
                // Calculate Life Path Number
                const date = new Date(birthdate);
                const day = date.getDate();
                const month = date.getMonth() + 1;
                const year = date.getFullYear();
                
                function reduceToSingleDigit(num) {
                    while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                        num = num.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
                    }
                    return num;
                }
                
                const lifePath = reduceToSingleDigit(day + month + year);
                
                // Calculate Name Number
                let nameNumber = 0;
                if (name) {
                    const nameValue = name.toUpperCase().split('').reduce((sum, char) => {
                        const charCode = char.charCodeAt(0);
                        if (charCode >= 65 && charCode <= 90) {
                            let value = ((charCode - 64 - 1) % 9) + 1;
                            return sum + value;
                        }
                        return sum;
                    }, 0);
                    nameNumber = reduceToSingleDigit(nameValue);
                }
                
                const lifePathMeanings = {
                    1: 'Leader, independent, pioneering',
                    2: 'Cooperative, diplomatic, peacemaker',
                    3: 'Creative, expressive, optimistic',
                    4: 'Practical, organized, builder',
                    5: 'Adventurous, freedom-loving, curious',
                    6: 'Nurturing, responsible, caring',
                    7: 'Spiritual, analytical, seeker',
                    8: 'Ambitious, material success, power',
                    9: 'Humanitarian, compassionate, idealistic',
                    11: 'Intuitive, inspirational, teacher',
                    22: 'Master builder, practical idealist',
                    33: 'Master teacher, compassionate healer'
                };
                
                const result = `
                    <div style="line-height: 1.8;">
                        <div style="margin-bottom: 20px;">
                            <div style="font-size: 36px; font-weight: 700; color: #667eea; margin-bottom: 8px;">Life Path Number: ${lifePath}</div>
                            <div style="color: #666;">${lifePathMeanings[lifePath] || 'Unique path'}</div>
                        </div>
                        ${name ? `
                        <div style="margin-bottom: 20px;">
                            <div style="font-size: 24px; font-weight: 600; color: #667eea; margin-bottom: 8px;">Name Number: ${nameNumber}</div>
                            <div style="color: #666;">Your name influences your personality and destiny</div>
                        </div>
                        ` : ''}
                        <div style="margin-bottom: 20px;">
                            <strong>Interpretation:</strong><br>
                            Your Life Path Number ${lifePath} reveals your life's purpose and the lessons you're here to learn. ${lifePathMeanings[lifePath] || 'This number guides your journey and helps you understand your true nature.'}
                        </div>
                        <div style="margin-top: 20px; padding-top: 16px; border-top: 2px solid #e0e0e0; display: flex; gap: 12px; flex-wrap: wrap;">
                            <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üîÆ View Birth Chart</button>
                            <button onclick="navigateTo('horoscope')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üìÖ Check Horoscope</button>
                            <button onclick="navigateTo('chat')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üí¨ Learn More</button>
                        </div>
                    </div>
                `;
                
                    document.getElementById('numerology-content').innerHTML = result;
                    
                    saveToHistory('numerology', { birthdate, name, lifePath, nameNumber });
                }, 500);
            } catch (error) {
                console.error('Error calculating numerology:', error);
                alert(currentLanguage === 'hi' ? '‡§Ö‡§Ç‡§ï ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§á‡§®‡§™‡•Å‡§ü ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§' : 'Error calculating numerology. Please check your inputs.');
            }
        }
        
        // Tarot Reading
        const tarotCards = [
            { name: 'The Fool', meaning: 'New beginnings, innocence, spontaneity' },
            { name: 'The Magician', meaning: 'Manifestation, resourcefulness, power' },
            { name: 'The High Priestess', meaning: 'Intuition, sacred knowledge, subconscious' },
            { name: 'The Empress', meaning: 'Femininity, beauty, nature, nurturing' },
            { name: 'The Emperor', meaning: 'Authority, structure, control, fatherhood' },
            { name: 'The Hierophant', meaning: 'Spiritual wisdom, religious beliefs, conformity' },
            { name: 'The Lovers', meaning: 'Love, harmony, relationships, values alignment' },
            { name: 'The Chariot', meaning: 'Control, willpower, success, determination' },
            { name: 'Strength', meaning: 'Strength, courage, persuasion, influence' },
            { name: 'The Hermit', meaning: 'Soul searching, introspection, inner guidance' },
            { name: 'Wheel of Fortune', meaning: 'Good luck, karma, life cycles, destiny' },
            { name: 'Justice', meaning: 'Justice, fairness, truth, cause and effect' },
            { name: 'The Hanged Man', meaning: 'Pause, surrender, letting go, new perspectives' },
            { name: 'Death', meaning: 'Endings, change, transformation, transition' },
            { name: 'Temperance', meaning: 'Balance, moderation, patience, purpose' },
            { name: 'The Devil', meaning: 'Bondage, addiction, sexuality, materialism' },
            { name: 'The Tower', meaning: 'Sudden change, upheaval, chaos, revelation' },
            { name: 'The Star', meaning: 'Hope, faith, purpose, renewal, spirituality' },
            { name: 'The Moon', meaning: 'Illusion, fear, anxiety, subconscious' },
            { name: 'The Sun', meaning: 'Positivity, fun, warmth, success, vitality' },
            { name: 'Judgement', meaning: 'Judgement, rebirth, inner calling, absolution' },
            { name: 'The World', meaning: 'Completion, accomplishment, fulfillment' }
        ];
        
        function drawTarotCards() {
            try {
                const question = document.getElementById('tarot-question').value.trim();
                
                // Log the action
                saveActivityLog('button_click', 'tarot', {
                    action: 'draw_tarot_cards',
                    hasQuestion: !!question,
                    questionLength: question ? question.length : 0
                });
                
                // Show loading animation
                const resultDiv = document.getElementById('tarot-result');
                if (resultDiv) {
                    resultDiv.style.display = 'block';
                    document.getElementById('tarot-cards').innerHTML = '<div style="text-align: center; padding: 40px;"><div class="loading" style="margin: 0 auto;"></div><p style="margin-top: 16px;">' + (currentLanguage === 'hi' ? '‡§ï‡§æ‡§∞‡•ç‡§° ‡§ñ‡•Ä‡§Ç‡§ö‡•á ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...' : 'Drawing cards...') + '</p></div>';
                    document.getElementById('tarot-reading').innerHTML = '';
                }
                
                // Simulate card drawing delay for better UX
                setTimeout(() => {
                    // Shuffle and draw 3 cards
                    const shuffled = [...tarotCards].sort(() => Math.random() - 0.5);
                    const drawnCards = shuffled.slice(0, 3);
                
                const positions = ['Past', 'Present', 'Future'];
                const cardsHtml = drawnCards.map((card, index) => `
                    <div style="text-align: center; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="font-size: 48px; margin-bottom: 12px;">üÉè</div>
                        <div style="font-weight: 600; margin-bottom: 8px; color: #667eea;">${positions[index]}</div>
                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">${card.name}</div>
                        <div style="color: #666; font-size: 14px;">${card.meaning}</div>
                    </div>
                `).join('');
                
                document.getElementById('tarot-cards').innerHTML = cardsHtml;
                
                const reading = `
                    <div style="line-height: 1.8;">
                        ${question ? `<div style="margin-bottom: 16px;"><strong>Your Question:</strong> ${question}</div>` : ''}
                        <div style="margin-bottom: 16px;">
                            <strong>Past (${drawnCards[0].name}):</strong> ${drawnCards[0].meaning}
                        </div>
                        <div style="margin-bottom: 16px;">
                            <strong>Present (${drawnCards[1].name}):</strong> ${drawnCards[1].meaning}
                        </div>
                        <div style="margin-bottom: 20px;">
                            <strong>Future (${drawnCards[2].name}):</strong> ${drawnCards[2].meaning}
                        </div>
                        <div style="margin-top: 20px; padding-top: 16px; border-top: 2px solid #e0e0e0; display: flex; gap: 12px; flex-wrap: wrap;">
                            <button onclick="navigateTo('horoscope')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üìÖ View Horoscope</button>
                            <button onclick="navigateTo('chat')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üí¨ Ask Questions</button>
                            <button onclick="navigateTo('history')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üìú View History</button>
                        </div>
                    </div>
                `;
                
                    document.getElementById('tarot-reading').innerHTML = reading;
                    
                    saveToHistory('tarot', { question, cards: drawnCards.map(c => c.name), reading });
                }, 1000); // 1 second delay for better UX
            } catch (error) {
                console.error('Error drawing tarot cards:', error);
                alert(currentLanguage === 'hi' ? '‡§§‡§æ‡§∞‡•ã ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ñ‡•Ä‡§Ç‡§ö‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Error drawing tarot cards. Please try again.');
            }
        }
        
        // Panchang Generator
        function generatePanchang() {
            try {
                const dateInput = document.getElementById('panchang-date');
                const selectedDate = dateInput ? new Date(dateInput.value || new Date()) : new Date();
                
                // Tithi calculation (simplified - based on lunar day)
                const tithis = ['Pratipada', 'Dwitiya', 'Tritiya', 'Chaturthi', 'Panchami', 'Shashthi', 'Saptami', 'Ashtami', 'Navami', 'Dashami', 'Ekadashi', 'Dwadashi', 'Trayodashi', 'Chaturdashi', 'Purnima', 'Amavasya'];
                const dayOfMonth = selectedDate.getDate();
                const tithi = tithis[(dayOfMonth - 1) % 16];
                
                // Nakshatra calculation
                const nakshatras = ['Ashwini', 'Bharani', 'Krittika', 'Rohini', 'Mrigashira', 'Ardra', 'Punarvasu', 'Pushya', 'Ashlesha', 'Magha', 'Purva Phalguni', 'Uttara Phalguni', 'Hasta', 'Chitra', 'Swati', 'Vishakha', 'Anuradha', 'Jyeshtha', 'Mula', 'Purva Ashadha', 'Uttara Ashadha', 'Shravana', 'Dhanishta', 'Shatabhisha', 'Purva Bhadrapada', 'Uttara Bhadrapada', 'Revati'];
                const nakshatra = nakshatras[(dayOfMonth + selectedDate.getMonth() * 2) % 27];
                
                // Yoga calculation
                const yogas = ['Vishkambha', 'Priti', 'Ayushman', 'Saubhagya', 'Shobhana', 'Atiganda', 'Sukarma', 'Dhriti', 'Shula', 'Ganda', 'Vriddhi', 'Dhruva', 'Vyaghata', 'Harshana', 'Vajra', 'Siddhi', 'Vyatipata', 'Variyana', 'Parigha', 'Shiva', 'Siddha', 'Sadhya', 'Shubha', 'Shukla', 'Brahma', 'Indra', 'Vaidhriti'];
                const yoga = yogas[(dayOfMonth + selectedDate.getMonth()) % 27];
                
                // Karana calculation
                const karanas = ['Bava', 'Balava', 'Kaulava', 'Taitila', 'Gara', 'Vanija', 'Bhadra', 'Vishti'];
                const karana = karanas[(dayOfMonth * 2) % 8];
                
                // Sunrise/Sunset (simplified calculation)
                const sunrise = '6:00 AM';
                const sunset = '6:30 PM';
                
                // Muhurat timings
                const muhurats = [
                    'Brahma Muhurat: 4:00 AM - 5:30 AM',
                    'Abhijit Muhurat: 11:45 AM - 12:30 PM',
                    'Vijaya Muhurat: 2:00 PM - 2:45 PM',
                    'Amrit Muhurat: 3:30 PM - 4:15 PM'
                ];
                
                // Display results
                document.getElementById('panchang-tithi-value').textContent = tithi;
                document.getElementById('panchang-nakshatra-value').textContent = nakshatra;
                document.getElementById('panchang-yoga-value').textContent = yoga;
                document.getElementById('panchang-karana-value').textContent = karana;
                document.getElementById('panchang-sunrise-value').textContent = sunrise;
                document.getElementById('panchang-sunset-value').textContent = sunset;
                
                const muhuratContent = muhurats.map(m => `<div style="margin-bottom: 8px;">‚Ä¢ ${m}</div>`).join('');
                document.getElementById('panchang-muhurat-content').innerHTML = muhuratContent;
                
                document.getElementById('panchang-result').style.display = 'block';
                
                saveToHistory('panchang', { date: selectedDate.toISOString().split('T')[0], tithi, nakshatra, yoga, karana });
            } catch (error) {
                console.error('Error generating panchang:', error);
                alert(currentLanguage === 'hi' ? '‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Error generating panchang. Please try again.');
            }
        }
        
        // Gemstone Recommendation
        function getGemstoneRecommendation() {
            try {
                const sign = document.getElementById('gemstone-sign').value;
                if (!sign) {
                    alert(currentLanguage === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§∞‡§æ‡§∂‡§ø ‡§ö‡§ø‡§®‡•ç‡§π ‡§ö‡•Å‡§®‡•á‡§Ç' : 'Please select a zodiac sign');
                    return;
                }
                
                const signInfo = getSignInfo(sign);
                
                // Gemstone mapping based on ruling planets
                const gemstoneMap = {
                    'Aries': { gemstone: 'Red Coral (Moonga)', color: 'Red', planet: 'Mars', benefits: 'Enhances courage, energy, and leadership qualities. Helps overcome obstacles and boosts confidence.' },
                    'Taurus': { gemstone: 'Diamond', color: 'White/Colorless', planet: 'Venus', benefits: 'Brings luxury, love, and harmony. Enhances relationships and artistic abilities.' },
                    'Gemini': { gemstone: 'Emerald (Panna)', color: 'Green', planet: 'Mercury', benefits: 'Improves communication, intelligence, and business skills. Enhances learning and memory.' },
                    'Cancer': { gemstone: 'Pearl (Moti)', color: 'White', planet: 'Moon', benefits: 'Promotes emotional balance, peace, and mental clarity. Enhances intuition and maternal instincts.' },
                    'Leo': { gemstone: 'Ruby (Manik)', color: 'Red', planet: 'Sun', benefits: 'Boosts confidence, authority, and leadership. Enhances vitality and removes negativity.' },
                    'Virgo': { gemstone: 'Emerald (Panna)', color: 'Green', planet: 'Mercury', benefits: 'Improves analytical skills, health, and communication. Enhances precision and attention to detail.' },
                    'Libra': { gemstone: 'Diamond', color: 'White/Colorless', planet: 'Venus', benefits: 'Brings balance, harmony, and beauty. Enhances relationships and artistic expression.' },
                    'Scorpio': { gemstone: 'Red Coral (Moonga)', color: 'Red', planet: 'Mars', benefits: 'Enhances passion, courage, and transformation. Helps overcome challenges and boosts energy.' },
                    'Sagittarius': { gemstone: 'Yellow Sapphire (Pukhraj)', color: 'Yellow', planet: 'Jupiter', benefits: 'Brings wisdom, prosperity, and spiritual growth. Enhances knowledge and good fortune.' },
                    'Capricorn': { gemstone: 'Blue Sapphire (Neelam)', color: 'Blue', planet: 'Saturn', benefits: 'Brings discipline, career success, and stability. Helps overcome delays and obstacles.' },
                    'Aquarius': { gemstone: 'Blue Sapphire (Neelam)', color: 'Blue', planet: 'Saturn', benefits: 'Enhances innovation, humanitarianism, and spiritual growth. Brings stability and success.' },
                    'Pisces': { gemstone: 'Yellow Sapphire (Pukhraj)', color: 'Yellow', planet: 'Jupiter', benefits: 'Brings spiritual growth, intuition, and compassion. Enhances wisdom and prosperity.' }
                };
                
                const gemstone = gemstoneMap[sign];
                
                const result = `
                    <div style="line-height: 1.8;">
                        <div style="text-align: center; margin-bottom: 24px; padding: 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white;">
                            <div style="font-size: 48px; margin-bottom: 12px;">üíé</div>
                            <div style="font-size: 32px; font-weight: 700; margin-bottom: 8px;">${gemstone.gemstone}</div>
                            <div style="font-size: 18px; opacity: 0.9;">For ${signInfo.symbol} ${sign}</div>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #667eea; font-size: 18px;">Color:</strong> ${gemstone.color}<br>
                            <strong style="color: #667eea; font-size: 18px;">Ruling Planet:</strong> ${gemstone.planet}
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 12px; margin-bottom: 20px;">
                            <strong style="color: #667eea; font-size: 18px; display: block; margin-bottom: 12px;">Benefits:</strong>
                            <div style="line-height: 1.8;">${gemstone.benefits}</div>
                        </div>
                        <div style="padding: 16px; background: #e8f5e9; border-radius: 12px; margin-top: 20px;">
                            <strong style="color: #2e7d32;">üí° Wearing Tip:</strong> Wear this gemstone in a ring or pendant. It's best to wear it on the day of your ruling planet. Consult an astrologer for the exact finger and metal.
                        </div>
                        <div style="margin-top: 20px; padding-top: 16px; border-top: 2px solid #e0e0e0; display: flex; gap: 12px; flex-wrap: wrap;">
                            <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üîÆ View Birth Chart</button>
                            <button onclick="navigateTo('chat')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üí¨ Ask Questions</button>
                        </div>
                    </div>
                `;
                
                document.getElementById('gemstone-content').innerHTML = result;
                document.getElementById('gemstone-result').style.display = 'block';
                
                saveToHistory('gemstone', { sign, gemstone: gemstone.gemstone, planet: gemstone.planet });
            } catch (error) {
                console.error('Error getting gemstone recommendation:', error);
                alert(currentLanguage === 'hi' ? '‡§∞‡§§‡•ç‡§® ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Error getting gemstone recommendation. Please try again.');
            }
        }
        
        // Vastu Tips Generator
        function getVastuTips() {
            try {
                const vastuType = document.getElementById('vastu-type').value;
                if (!vastuType) {
                    alert(currentLanguage === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç' : 'Please select an area');
                    return;
                }
                
                const vastuTips = {
                    'home': {
                        title: 'Vastu Tips for Home',
                        tips: [
                            'Main entrance should face East, North, or Northeast for positive energy flow.',
                            'Keep the center of the house (Brahmasthan) empty and clean.',
                            'Kitchen should be in Southeast direction.',
                            'Master bedroom should be in Southwest direction.',
                            'Place idols or photos of deities in Northeast corner (Puja room).',
                            'Avoid placing mirrors opposite the bed.',
                            'Keep the Northeast corner light and clutter-free.',
                            'Place heavy furniture in Southwest direction.',
                            'Ensure good ventilation and natural light.',
                            'Avoid sharp corners pointing towards seating areas.'
                        ]
                    },
                    'office': {
                        title: 'Vastu Tips for Office',
                        tips: [
                            'Owner\'s cabin should be in Southwest corner.',
                            'Reception should face North or East.',
                            'Employees should face North or East while working.',
                            'Keep cash box or safe in North direction.',
                            'Conference room should be in Northwest.',
                            'Avoid sitting with back to the door.',
                            'Place plants in Northeast for positive energy.',
                            'Keep the office clutter-free and well-lit.',
                            'Avoid sharp objects pointing towards workstations.',
                            'Place water features in Northeast if possible.'
                        ]
                    },
                    'bedroom': {
                        title: 'Vastu Tips for Bedroom',
                        tips: [
                            'Bed should be placed with head towards South or East.',
                            'Avoid sleeping with head towards North.',
                            'Keep bedroom in Southwest or South direction.',
                            'Avoid placing mirrors opposite the bed.',
                            'Keep electronic devices away from bed.',
                            'Use soothing colors like light blue, green, or pink.',
                            'Ensure good ventilation and natural light.',
                            'Keep bedroom clean and clutter-free.',
                            'Place bed away from the door.',
                            'Avoid keeping water features in bedroom.'
                        ]
                    },
                    'kitchen': {
                        title: 'Vastu Tips for Kitchen',
                        tips: [
                            'Kitchen should be in Southeast direction.',
                            'Cooking should be done facing East.',
                            'Keep gas stove in Southeast corner.',
                            'Store water in Northeast corner.',
                            'Avoid placing kitchen directly opposite the main door.',
                            'Keep kitchen clean and well-ventilated.',
                            'Use bright colors like yellow or orange.',
                            'Avoid placing kitchen in Northeast or center.',
                            'Keep sharp objects covered when not in use.',
                            'Ensure good lighting in kitchen area.'
                        ]
                    },
                    'living': {
                        title: 'Vastu Tips for Living Room',
                        tips: [
                            'Living room should be in Northeast, North, or East direction.',
                            'Place furniture in Southwest or West.',
                            'Keep the center of living room open.',
                            'Use bright and warm colors.',
                            'Place TV in Southeast corner.',
                            'Ensure good natural light and ventilation.',
                            'Avoid placing heavy furniture in Northeast.',
                            'Keep living room clutter-free.',
                            'Place paintings or photos of nature in North or East.',
                            'Ensure comfortable seating arrangement.'
                        ]
                    },
                    'puja': {
                        title: 'Vastu Tips for Puja Room',
                        tips: [
                            'Puja room should be in Northeast direction.',
                            'Idols should face East or West, never North or South.',
                            'Keep puja room clean and well-lit.',
                            'Use white, yellow, or light colors.',
                            'Place idols at eye level or above.',
                            'Keep puja room on ground floor if possible.',
                            'Avoid placing puja room under stairs or in basement.',
                            'Keep the room free from clutter.',
                            'Light a lamp daily in Northeast corner.',
                            'Maintain silence and positive energy in puja room.'
                        ]
                    }
                };
                
                const tips = vastuTips[vastuType];
                
                const result = `
                    <div style="line-height: 1.8;">
                        <h3 style="color: #667eea; margin-bottom: 24px; text-align: center;">${tips.title}</h3>
                        <div style="display: grid; gap: 16px;">
                            ${tips.tips.map((tip, index) => `
                                <div style="padding: 16px; background: #f8f9fa; border-radius: 12px; border-left: 4px solid #667eea;">
                                    <div style="display: flex; align-items: start; gap: 12px;">
                                        <div style="font-size: 20px; color: #667eea; flex-shrink: 0;">${index + 1}.</div>
                                        <div style="flex: 1;">${tip}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <div style="margin-top: 24px; padding: 16px; background: #e8f5e9; border-radius: 12px;">
                            <strong style="color: #2e7d32;">üí° Note:</strong> These are general Vastu guidelines. For specific recommendations based on your birth chart, consult a Vastu expert.
                        </div>
                        <div style="margin-top: 20px; padding-top: 16px; border-top: 2px solid #e0e0e0; display: flex; gap: 12px; flex-wrap: wrap;">
                            <button onclick="navigateTo('kundli')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üîÆ View Birth Chart</button>
                            <button onclick="navigateTo('chat')" class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;">üí¨ Ask Questions</button>
                        </div>
                    </div>
                `;
                
                document.getElementById('vastu-content').innerHTML = result;
                document.getElementById('vastu-result').style.display = 'block';
                
                saveToHistory('vastu', { type: vastuType, tips: tips.tips });
            } catch (error) {
                console.error('Error getting vastu tips:', error);
                alert(currentLanguage === 'hi' ? '‡§µ‡§æ‡§∏‡•ç‡§§‡•Å ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Error getting vastu tips. Please try again.');
            }
        }
        
        // Simple navigation function that always works
        function navigateTo(section) {
            try {
                console.log('navigateTo called with:', section);
                
                if (!section) {
                    console.error('navigateTo: No section provided');
                    return;
                }
                
                // Ensure section is a string and trim whitespace
                section = String(section).trim();
                
                // Log the navigation activity
                saveActivityLog('navigation', section, {
                    previousSection: currentSection || 'unknown',
                    userAction: 'tab_click'
                });
                currentSection = section; // Update current section
                
                if (section === 'chat') {
                    console.log('Opening chat...');
                    if (typeof showChat === 'function') {
                        showChat();
                    } else {
                        console.error('showChat function not found');
                        // Try direct navigation
                        const chatSection = document.getElementById('chat-section');
                        if (chatSection) {
                            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
                            chatSection.style.display = 'flex';
                            chatSection.classList.add('active');
                        } else {
                            alert('Chat feature is not available. Please refresh the page.');
                        }
                    }
                } else {
                    console.log('Navigating to section:', section);
                    if (typeof showSection === 'function') {
                        showSection(section);
                    } else {
                        console.error('showSection function not found, trying direct navigation');
                        // Fallback: direct navigation
                        const targetSection = document.getElementById(section + '-section');
                        if (targetSection) {
                            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
                            targetSection.style.display = 'block';
                            // Update active nav
                            document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
                            const navLink = document.getElementById('nav-' + section);
                            if (navLink) navLink.classList.add('active');
                        } else {
                            alert('Page "' + section + '" not found. Please refresh the page.');
                        }
                    }
                }
            } catch (error) {
                console.error('Error in navigateTo:', error);
                console.error('Error stack:', error.stack);
                // Log the error
                saveActivityLog('error', section, {
                    error: error.message,
                    stack: error.stack
                });
                alert('Error navigating to ' + section + '. Please try again or refresh the page.');
            }
        }
        
        // Store the real navigateTo function reference
        window._navigateTo = navigateTo;
        
        // Make all functions globally accessible
        window.navigateTo = navigateTo; // Use the real function
        window.showSection = showSection;
        window.showChat = showChat;
        window.hideChat = hideChat;
        window.toggleLanguage = toggleLanguage;
        window.toggleSignMenu = toggleSignMenu;
        window.selectSign = selectSign;
        window.sendMessage = sendMessage;
        window.sendQuickQuestion = sendQuickQuestion;
        window.handleKeyPress = handleKeyPress;
        window.generateKundli = generateKundli;
        window.exportKundli = exportKundli;
        window.printKundli = printKundli;
        window.calculateCompatibility = calculateCompatibility;
        window.calculateNumerology = calculateNumerology;
        window.drawTarotCards = drawTarotCards;
        window.generatePanchang = generatePanchang;
        window.getGemstoneRecommendation = getGemstoneRecommendation;
        window.getVastuTips = getVastuTips;
        window.filterHistory = filterHistory;
        window.deleteReading = deleteReading;
        window.clearHistory = clearHistory;
        window.saveToHistory = saveToHistory;
        window.displayHistory = displayHistory;
        
        // Update the early navigateTo to use the real one
        window.navigateTo = navigateTo;
        
        // User Profile Functions
        function saveProfile() {
            try {
                const profile = {
                    name: document.getElementById('profile-name').value.trim(),
                    birthdate: document.getElementById('profile-birthdate').value,
                    birthtime: document.getElementById('profile-birthtime').value,
                    birthplace: document.getElementById('profile-birthplace').value.trim(),
                    zodiac: document.getElementById('profile-zodiac').value
                };
                
                localStorage.setItem('user-profile', JSON.stringify(profile));
                
                // Update current sign if zodiac changed
                if (profile.zodiac) {
                    userSign = profile.zodiac;
                    localStorage.setItem('ai-astrologer-sign', profile.zodiac);
                    updateUI();
                }
                
                // Show success message
                const savedMsg = document.getElementById('profile-saved');
                if (savedMsg) {
                    savedMsg.style.display = 'block';
                    setTimeout(() => {
                        savedMsg.style.display = 'none';
                    }, 3000);
                }
                
                loadProfile();
            } catch (error) {
                console.error('Error saving profile:', error);
                alert('Error saving profile. Please try again.');
            }
        }
        
        function loadProfile() {
            try {
                const profile = JSON.parse(localStorage.getItem('user-profile') || '{}');
                
                if (document.getElementById('profile-name')) document.getElementById('profile-name').value = profile.name || '';
                if (document.getElementById('profile-birthdate')) document.getElementById('profile-birthdate').value = profile.birthdate || '';
                if (document.getElementById('profile-birthtime')) document.getElementById('profile-birthtime').value = profile.birthtime || '';
                if (document.getElementById('profile-birthplace')) document.getElementById('profile-birthplace').value = profile.birthplace || '';
                if (document.getElementById('profile-zodiac')) document.getElementById('profile-zodiac').value = profile.zodiac || userSign;
                
                // Display current profile
                const profileDisplay = document.getElementById('profile-display');
                if (profileDisplay) {
                    if (profile.name || profile.birthdate) {
                        const signInfo = getSignInfo(profile.zodiac || userSign);
                        profileDisplay.innerHTML = `
                            <div style="line-height: 1.8;">
                                ${profile.name ? `<div><strong>Name:</strong> ${profile.name}</div>` : ''}
                                ${profile.birthdate ? `<div><strong>Birth Date:</strong> ${new Date(profile.birthdate).toLocaleDateString()}</div>` : ''}
                                ${profile.birthtime ? `<div><strong>Birth Time:</strong> ${profile.birthtime}</div>` : ''}
                                ${profile.birthplace ? `<div><strong>Birth Place:</strong> ${profile.birthplace}</div>` : ''}
                                <div><strong>Zodiac Sign:</strong> ${signInfo.symbol} ${profile.zodiac || userSign}</div>
                                <div><strong>Element:</strong> ${signInfo.element}</div>
                                <div><strong>Ruling Planet:</strong> ${signInfo.ruler}</div>
                            </div>
                        `;
                    } else {
                        profileDisplay.textContent = 'No profile saved yet. Fill in the form above to create your profile.';
                    }
                }
            } catch (error) {
                console.error('Error loading profile:', error);
            }
        }
        
        window.saveProfile = saveProfile;
        window.loadProfile = loadProfile;

        // Initialize function
        function initializeApp() {
            try {
                console.log('Initializing AI Astrologer app...');
                updateUI();
                
                // Ensure home section is visible on load
                const homeSection = document.getElementById('home-section');
                if (homeSection) {
                    homeSection.style.display = 'block';
                    // Update navigation
                    const navHome = document.getElementById('nav-home');
                    if (navHome) navHome.classList.add('active');
                }
                
                // Add click event listeners to navigation links as backup
                const navLinks = document.querySelectorAll('.nav-links a');
                navLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        try {
                            // Try data-section attribute first
                            const section = this.getAttribute('data-section');
                            if (section) {
                                console.log('Nav link clicked - navigating to:', section);
                                if (typeof navigateTo === 'function') {
                                    navigateTo(section);
                                } else {
                                    console.error('navigateTo function not found');
                                    alert('Navigation error. Please refresh the page.');
                                }
                                return false;
                            }
                            
                            // Try data-action attribute
                            const action = this.getAttribute('data-action');
                            if (action === 'chat') {
                                console.log('Nav link clicked - opening chat');
                                if (typeof navigateTo === 'function') {
                                    navigateTo('chat');
                                } else {
                                    console.error('navigateTo function not found');
                                    alert('Navigation error. Please refresh the page.');
                                }
                                return false;
                            }
                            
                            // Fallback to onclick attribute
                            const onclickAttr = this.getAttribute('onclick');
                            if (onclickAttr) {
                                try {
                                    eval(onclickAttr);
                                } catch (err) {
                                    console.error('Error executing onclick:', err);
                                }
                            }
                        } catch (error) {
                            console.error('Error in nav link click handler:', error);
                            alert('Navigation error. Please refresh the page.');
                        }
                        
                        return false;
                    });
                });
                
                // Add click event listeners to service cards
                const serviceCards = document.querySelectorAll('.service-card');
                serviceCards.forEach(card => {
                    card.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        // Add visual feedback
                        this.style.transform = 'scale(0.98)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);
                        
                        try {
                            // Try data-section attribute first
                            const section = this.getAttribute('data-section');
                            if (section) {
                                console.log('Service card clicked - navigating to:', section);
                                if (typeof navigateTo === 'function') {
                                    navigateTo(section);
                                } else {
                                    console.error('navigateTo function not found');
                                    alert('Navigation error. Please refresh the page.');
                                }
                                return false;
                            }
                            
                            // Try data-action attribute
                            const action = this.getAttribute('data-action');
                            if (action === 'chat') {
                                console.log('Service card clicked - opening chat');
                                if (typeof navigateTo === 'function') {
                                    navigateTo('chat');
                                } else {
                                    console.error('navigateTo function not found');
                                    alert('Navigation error. Please refresh the page.');
                                }
                                return false;
                            }
                            
                            // Fallback: try onclick attribute
                            const onclickAttr = this.getAttribute('onclick');
                            if (onclickAttr) {
                                try {
                                    eval(onclickAttr);
                                } catch (err) {
                                    console.error('Error executing onclick:', err);
                                }
                            } else {
                                console.warn('Service card has no navigation handler');
                            }
                        } catch (error) {
                            console.error('Error in service card click handler:', error);
                            alert('Error navigating. Please try again or refresh the page.');
                        }
                        
                        return false;
                    });
                    
                    // Also add mousedown for better touch support
                    card.addEventListener('mousedown', function(e) {
                        this.style.opacity = '0.8';
                    });
                    
                    card.addEventListener('mouseup', function(e) {
                        this.style.opacity = '';
                    });
                    
                    card.addEventListener('mouseleave', function(e) {
                        this.style.opacity = '';
                        this.style.transform = '';
                    });
                });
                
                // Add click event listeners to buttons with data-action="chat"
                const chatButtons = document.querySelectorAll('button[data-action="chat"]');
                chatButtons.forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        try {
                            console.log('Chat button clicked');
                            navigateTo('chat');
                        } catch (error) {
                            console.error('Error in chat button click handler:', error);
                            alert('Error opening chat. Please try again.');
                        }
                        
                        return false;
                    });
                });
                
                console.log('App initialized successfully');
                console.log('Navigation is ready! Try clicking any link or service card.');
                
                // Test navigation function availability
                if (typeof navigateTo === 'function') {
                    console.log('‚úì navigateTo function is available');
                } else {
                    console.error('‚úó navigateTo function is NOT available');
                }
                
                if (typeof showSection === 'function') {
                    console.log('‚úì showSection function is available');
                } else {
                    console.error('‚úó showSection function is NOT available');
                }
                
            } catch (error) {
                console.error('Initialization error:', error);
                alert('Error initializing app. Please refresh the page.');
            }
        }

        // Make navigateTo available immediately (before DOM loads)
        window.navigateTo = function(section) {
            console.log('navigateTo called (early)', section);
            // Wait for functions to be available
            setTimeout(() => {
                if (typeof showChat === 'function' && section === 'chat') {
                    showChat();
                } else if (typeof showSection === 'function') {
                    showSection(section);
                } else {
                    console.warn('Navigation functions not ready yet, retrying...');
                    setTimeout(() => {
                        if (section === 'chat' && typeof showChat === 'function') {
                            showChat();
                        } else if (typeof showSection === 'function') {
                            showSection(section);
                        }
                    }, 100);
                }
            }, 10);
        };
        
        // Initialize on page load
        function loadApp() {
            try {
                console.log('JavaScript loading...');
                console.log('DOM ready state:', document.readyState);
                
                if (document.readyState === 'loading') {
                    window.addEventListener('DOMContentLoaded', () => {
                        console.log('DOMContentLoaded fired');
                        setTimeout(() => {
                            initializeApp();
                            verifyJavaScriptLoaded();
                        }, 50);
                    });
                } else {
                    // DOM is already loaded
                    console.log('DOM already loaded');
                    setTimeout(() => {
                        initializeApp();
                        verifyJavaScriptLoaded();
                    }, 50);
                }
            } catch (error) {
                console.error('Error in loadApp:', error);
            }
        }
        
        // Verify all JavaScript functions are loaded
        function verifyJavaScriptLoaded() {
            console.log('=== JavaScript Load Verification ===');
            const functions = [
                'navigateTo', 'showSection', 'showChat', 'hideChat',
                'toggleLanguage', 'selectSign', 'sendMessage', 'sendQuickQuestion', 'handleKeyPress',
                'generateKundli', 'exportKundli', 'printKundli', 'calculateCompatibility', 
                'calculateNumerology', 'drawTarotCards', 'generatePanchang', 
                'getGemstoneRecommendation', 'getVastuTips',
                'updateUI', 'updateHoroscope', 'updateQuickInsights',
                'saveProfile', 'loadProfile', 'displayHistory', 'filterHistory',
                'deleteReading', 'clearHistory', 'saveToHistory'
            ];
            
            let allLoaded = true;
            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    console.log('‚úì', funcName, 'is loaded');
                } else {
                    console.error('‚úó', funcName, 'is NOT loaded');
                    allLoaded = false;
                }
            });
            
            if (allLoaded) {
                console.log('‚úÖ All JavaScript functions loaded successfully!');
            } else {
                console.warn('‚ö†Ô∏è Some functions may not be loaded. Refresh the page if navigation doesn\'t work.');
            }
            console.log('=====================================');
        }
        
        // Test navigation function - can be called from console
        window.testNavigation = function() {
            const sections = ['home', 'horoscope', 'kundli', 'matchmaking', 'tarot', 'numerology', 'panchang', 'gemstone', 'vastu', 'history', 'profile', 'chat'];
            console.log('Testing navigation to all sections...');
            sections.forEach((section, index) => {
                setTimeout(() => {
                    console.log('Testing:', section);
                    navigateTo(section);
                }, index * 500);
            });
        };
        
        // Start loading
        loadApp();
    </script>
</body>
</html>
